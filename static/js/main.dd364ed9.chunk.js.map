{"version":3,"sources":["assets/images/public-health-agency.png","assets/images/University-Of-Calgary-Logo.png","assets/images/IndustryUpdateJuly_2020.png","assets/images/IndustryUpdateJune_2020.png","assets/images/August2020Update.png","assets/images/IndustryUpdateMay_2020.png","assets/images/IndustryUpdatePre_2020.png","assets/images/SeroTrackerBloodBank_July_2020.png","assets/images/Prepublication.png","assets/images/LancetIDArticle.png","assets/images/colored-icon.svg","types.ts","utils/translate/translateService.ts","utils/analyticsUtils.tsx","components/pages/About.tsx","constants.ts","components/pages/CookiePolicy.tsx","context.tsx","httpClient.ts","utils/translate/caseChanger.ts","utils/mapUtils.tsx","components/shared/InformationIcon.tsx","components/sidebar/right-sidebar/Filters.tsx","components/sidebar/left-sidebar/TotalStats.tsx","components/sidebar/right-sidebar/date-slider/Handle.tsx","components/sidebar/right-sidebar/date-slider/SliderRail.tsx","components/sidebar/right-sidebar/date-slider/Tick.tsx","components/sidebar/right-sidebar/date-slider/Track.tsx","components/sidebar/right-sidebar/date-slider/Slider.tsx","components/sidebar/right-sidebar/LastUpdated.tsx","components/shared/InformationText.tsx","components/sidebar/left-sidebar/AnalysisMethods.tsx","metaAnalysis.ts","components/map/Legend.tsx","components/map/Map.tsx","components/mobile/ExploreMobile.tsx","components/sidebar/left-sidebar/LeftSidebar.tsx","components/sidebar/right-sidebar/RightSidebar.tsx","components/pages/Dashboard/Explore.tsx","components/charts/StudyDetailsModal.tsx","components/charts/ReferencesTable.tsx","components/charts/Charts.tsx","components/mobile/AnalyzeMobile.tsx","components/pages/Dashboard/Analyze.tsx","components/pages/Data.tsx","components/pages/insights/InsightsCard.tsx","components/pages/insights/Insights.tsx","components/pages/PrivacyPolicy.tsx","components/pages/TermsOfUse.tsx","components/shared/CookieBanner.tsx","components/shared/NavBar.tsx","App.tsx","serviceWorker.js","index.js"],"names":["module","exports","LanguageType","AggregationFactor","recursiveFind","object","keys","index","nextObj","length","language","english","Translate","text","specifier","substitution","addSpaces","translationDictionary","English","French","translatedString","Object","forEach","key","value","replace","RegExp","e","sendPageView","location","ReactGA","set","page","pathname","pageview","sendAnalyticsEvent","props","GAListener","children","trackingId","history","useHistory","useEffect","initialize","titleCase","debug","process","gaOptions","cookieDomain","listen","About","isMobileDeviceOrTablet","useMediaQuery","maxWidth","selectItem","label","name","selectLink","link","renderBioBlock","description","linkedIn","email","twitter","map","line","href","onClick","target","rel","icon","faLinkedin","className","faTwitter","faEnvelope","src","alt","height","HealthAgencyLogo","UcalgaryLogo","toLowerCase","CookiePolicy","maxDeviceWidth","script","document","createElement","body","appendChild","removeChild","title","AppContext","createContext","getEmptyFilters","source_type","Set","study_status","test_type","country","population_group","sex","age","risk_of_bias","isotypes_reported","specimen_type","publish_date","estimate_grade","initialState","healthcheck","airtable_records","filtered_records","estimate_grade_prevalences","filters","filter_options","all_filter_options","data_page_state","mapOpen","updated_at","country_prevalences","showCookieBanner","showAnalyzePopup","filterRecords","records","return_records","record","filter_key","size","Array","isArray","match","item","includes","publishDate","dateInMillis","Date","parse","dates","from","values","in_filter","i","has","some","o","filter_function","push","recomputeFilterOptions","options","getFilterOptions","filter","seroprevalence","denominator","add","isotype_reported","reducer","state","action","new_filters","type","payload","filter_type","filter_value","AppContextProvider","useReducer","dispatch","Provider","httpClient","url","url_full","fetch","res","status","error_msg","json","console","error","response_json","data","method","headers","JSON","stringify","this","httpGet","response","source_name","SOURCE_NAME","lead_org","LEAD_ORG","first_author","FIRST_AUTHOR","SOURCE_TYPE","STUDY_STATUS","study_type","STUDY_TYPE","TEST_TYPE","SPECIMEN_TYPE","ISOTYPES","manufacturer","MANUFACTURER","approving_regulator","APPROVAL","sensitivity","SENSITIVITY","specificity","SPECIFICITY","PUB_DATE","publisher","PUBLISHER","COUNTRY","STATE","city","CITY","POPULATION_GROUP","SEX","AGE","DENOMINATOR","summary","SUMMARY","SERUM_POS_PREVALENCE","sample_size","SAMPLE_SIZE","sampling_method","SAMPLING","sampling_start_date","SAMPLING_START","sampling_end_date","SAMPLING_END","OVERALL_RISK_OF_BIAS","URL","include_in_n","INCLUDE_IN_N","ESTIMATE_GRADE","updated_at_words","split","updated_at_string","join","formattedRecords","serum_pos_prevalence","req_body","httpPost","formattedResponse","estimateSummary","seroprevalence_estimate_summary","numberOfStudies","n_estimates","testsAdministered","n_tests_administered","geographicalName","localEstimate","maxEstimate","Local","max_estimate","minEstimate","min_estimate","numEstimates","nationalEstimate","National","regionalEstimate","Regional","sublocalEstimate","Sublocal","aggregation_variable","meta_analysis_technique","meta_analysis_transformation","formatted_agg_var","formatted_records","formatted_response","error_percent","n","total_N","num_studies","n_studies","seroprevalence_percent","countries","toPascalCase","str","_","upperFirst","camelCase","getLogit","percentage","decimal","Math","log","getDecimalFromLogit","logit","exp","colors","Countries","getCountryName","optionString","code","translatedCountryName","highlightFeature","layer","setStyle","weight","color","dashArray","fillOpacity","zIndex","bringToFront","resetHighlight","opacity","createAltPopup","properties","regions","addRegion","r","undefined","lastIndex","isLastSection","minString","toFixed","maxString","regionString","toUpperCase","createPopupGeographySection","zoomToFeature","mapRef","current","leafletElement","fitBounds","getBounds","InformationIcon","tooltip","tooltipHeader","offset","position","popupSize","Popup","random","onOpen","popperModifiers","preventOverflow","boundariesElement","trigger","faInfoCircle","Header","Content","Filters","useContext","formatOptions","formatted_options","toString","jsonObjectString","alternativeString","buildSectionHeader","header_text","tooltip_text","tooltip_header","buildFilterDropdown","placeholder","Dropdown","fluid","multiple","search","clearable","selection","onChange","addFilter","defaultValue","TotalStats","useState","setNumCountries","numStudies","setNumStudies","setSeroprevalence","setN","updateCountryPrevalence","a","api","postMetaAnalysisAll","results","Handle","domain","min","max","handle","id","percent","getHandleProps","disabled","style","left","role","aria-valuemin","aria-valuemax","aria-valuenow","SliderRail","getRailProps","Tick","tick","count","marginLeft","width","Track","source","getTrackProps","DateRangeSlider","endMoment","getTime","displayStartDate","setStartDate","displayEndDate","setEndDate","startBound","setStartBound","endBound","startDate","sort","b","customTicks","endDate","monthRange","start","end","startTime","timeElapsed","monthsElapsed","startMonth","getMonth","range","month","year","getFullYear","floor","date","getTimeRange","totalCount","todayTick","localeDate","monthTicks","toLocaleDateString","createTicks","mode","step","handles","right","tracks","ticks","tickItem","defaultProps","LastUpdated","InformationText","AnalysisMethods","Legend","buckets","background","Map","createRef","geoJsonRef","mapRecords","setMapRecords","forceUpdate","setForceUpdate","features","maxSeroprevalence","apply","roundedMax","ceil","x","logitStep","parseFloat","getBuckets","importGeo","prevalences","prevalenceCountryDict","reduce","feature","mapAltDataToFeatures","initImportGeo","bounds","latLngBounds","maxBounds","ref","center","zoom","bounceAtZoomLimits","minZoom","enableHighAccuracy","maxBoundsViscosity","TileLayer","attribution","tileSize","zoomOffset","GeoJSON","onEachFeature","bindPopup","ReactDOMServer","renderToString","closeButton","autoPan","on","mouseover","openPopup","mouseout","closePopup","mousemove","getPopup","setLatLng","latlng","click","onAltEachFeature","fillColor","altStyle","ExploreMobile","showMobileFilters","setShowFilters","showSummary","setShowSummary","handleFilterToggle","showMobile","Sidebar","Pushable","as","Segment","Menu","animation","vertical","direction","visible","faTimes","fontWeight","top","Pusher","faFilter","faBars","LeftSidebar","RightSidebar","to","Explore","getEstimateGrades","estimateGradePrevalences","StudyDetailsModal","open","setOpen","getPossibleNullString","nullString","getPossibleNullStringArray","Modal","centered","closeOnEscape","closeOnDimmerClick","onClose","marginTop","marginRight","Button","padding","Description","getAuthorString","getPublishString","ReferencesTable","activePage","setActivePage","boundaryRange","siblingRange","totalPages","setTotalPages","pageLength","setPageLength","column","setColumn","setDirection","setData","pageLengthOptions","isMobileDevice","splicedData","orderBy","splice","buildHeaderCell","sortColumn","displayName","Table","HeaderCell","sorted","clickedColumn","celled","sortable","fixed","striped","Row","Body","Cell","getGeography","displaySex","displayAge","getPopulation","Footer","Pagination","onPageChange","event","inline","Charts","yAxisSelection","setYAxis","showModal","toggleModal","setRecords","yAxisOptions","postMetaAnalysis","reAggregatedRecords","chartData","sortBy","reverse","updateCharts","CustomTooltip","active","recordError","find","closeModal","MobileInfoModal","closeIcon","layout","barGap","strokeDasharray","dataKey","interval","longestWord","getYAxisWidth","content","isAnimationActive","fill","maxBarSize","barSize","y","errorBarWidth","textAnchor","dominantBaseline","strokeWidth","AnalyzeMobile","Analyze","Data","clickLink","toLocaleLowerCase","InsightsCard","identifier","img","faFile","italicize","Insights","August2020Update","July2020Update","LancetId","BloodBank","June2020Update","May2020Update","PreprintUpdate","MedRxiv","PrivacyPolicy","TermsOfUse","CookieBanner","localStorage","getItem","setItem","NavBar","tab","setTab","getTabClass","tabName","useLocation","usePageViews","MultiColorIcon","faGlobeAmericas","faChartBar","faTable","faFileAlt","faUsers","App","getAirtableRecords","handleResize","vh","window","innerHeight","documentElement","setProperty","addEventListener","path","exact","Boolean","hostname","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.dd364ed9.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/University-Of-Calgary-Logo.dfd2aa50.png\";","module.exports = __webpack_public_path__ + \"static/media/IndustryUpdateJuly_2020.53e6e269.png\";","module.exports = __webpack_public_path__ + \"static/media/IndustryUpdateJune_2020.2cac3c48.png\";","module.exports = __webpack_public_path__ + \"static/media/August2020Update.b2394ac4.png\";","module.exports = __webpack_public_path__ + \"static/media/IndustryUpdateMay_2020.4021b423.png\";","module.exports = __webpack_public_path__ + \"static/media/IndustryUpdatePre_2020.a93736ac.png\";","module.exports = __webpack_public_path__ + \"static/media/SeroTrackerBloodBank_July_2020.669b184d.png\";","module.exports = __webpack_public_path__ + \"static/media/Prepublication.0b43b193.png\";","module.exports = __webpack_public_path__ + \"static/media/LancetIDArticle.9c54a7db.png\";","module.exports = __webpack_public_path__ + \"static/media/colored-icon.ab2ccbe8.svg\";","\nexport type AirtableRecord = {\n    source_name: string | null,\n    lead_org?: string | null,\n    first_author?: string | null,\n    source_type: string | null,\n    study_status: string | null,\n    test_type: string[] | null,\n    specimen_type: string | null,\n    isotypes_reported: string[] | null,\n    manufacturer?: string | null,\n    approving_regulator?: string | null,\n    sensitivity?: number | null,\n    specificity?: number | null,\n    country: string | null,\n    state?: string[] | null,\n    city?: string[] | null,\n    population_group: string[] | null,\n    sex: string | null,\n    age: string[] | null,\n    denominator: number | null,\n    seroprevalence: number | null,\n    publish_date?: string[] | string | null,\n    publisher?: string | null,\n    risk_of_bias: string | null,\n    study_type?: string | null,\n    sample_size?: string | null,\n    sampling_method?: string | null,\n    sampling_start_date?: string | null,\n    sampling_end_date?: string | null,\n    summary?: string | null,\n    url?: string | null,\n    include_in_n: boolean,\n    estimate_grade: string | null\n};\n\nexport type AggregatedRecord = {\n    error: number[];\n    n: number;\n    name: string;\n    num_studies: number;\n    seroprevalence: number;\n}\n\n// Each filter will be a javascript set\n// TODO: find typing to represent sets\nexport type Filters = {\n    source_type: any,\n    study_status: any,\n    test_type: any,\n    country: any,\n    population_group: any,\n    sex: any,\n    age: any,\n    risk_of_bias: any,\n    isotypes_reported: any,\n    specimen_type: any\n    publish_date: any,\n    estimate_grade: any,\n};\n\nexport type FilterType = 'country' | 'population_group' | 'sex' | 'age' | 'study_status' | 'test_type' | 'source_type' | 'risk_of_bias' | 'isotypes_reported' | 'specimen_type' | 'estimate_grade';\n\nexport enum LanguageType {\n    french = 'fr',\n    english = 'en'\n}\n\nexport type State = {\n    healthcheck: string,\n    airtable_records: AirtableRecord[],\n    filtered_records: AirtableRecord[],\n    filters: Filters,\n    filter_options: Filters,\n    all_filter_options: Filters,\n    updated_at: string,\n    data_page_state: DataPageState,\n    language: LanguageType,\n    country_prevalences: AggregatedRecord[],\n    estimate_grade_prevalences: AlternateAggregatedRecord[],\n    showCookieBanner: boolean,\n    showAnalyzePopup: boolean\n};\n\nexport type AlternateAggregatedRecord = {\n    testsAdministered: number;\n    geographicalName: string;\n    numberOfStudies: number;\n    localEstimate?: RegionalPrevalenceEstimate,\n    nationalEstimate?: RegionalPrevalenceEstimate,\n    regionalEstimate?: RegionalPrevalenceEstimate,\n    sublocalEstimate?: RegionalPrevalenceEstimate\n}\n\nexport type RegionalPrevalenceEstimate = {\n    maxEstimate: number;\n    minEstimate: number;\n    numEstimates: number;\n}\n\nexport enum AggregationFactor {\n    country = 'country',\n    population_group = 'population_group',\n    sex = 'sex',\n    age = 'age',\n    study_status = 'study_status',\n    test_type = 'test_type',\n    source_type = 'source_type',\n    risk_of_bias = 'risk_of_bias',\n    isotypes_reported = 'isotypes_reported',\n}\n\nexport type DataPageState = {\n    mapOpen: boolean\n}\n\nexport type CustomMatcherResult = {\n    pass: boolean\n    message: string\n}\n","import { LanguageType } from \"../../types\";\nimport English from './en.json';\nimport French from './fr.json';\n\ninterface TranslateStringProps {\n  text: string;\n}\n\n// Recursive Typings for nested JSON objects\ntype JsonRecord<T> = Record<string, T | string>;\ninterface Json extends JsonRecord<Json> { };\n\nconst recursiveFind = (object: any, keys: string[], index: number): string => {\n  const key = keys[index];\n  const nextObj = object[key];\n\n  if (index + 1 === keys.length) {\n    return nextObj;\n  }\n  return recursiveFind(nextObj, keys, index + 1);\n\n}\n\nlet language: LanguageType = LanguageType.english;\n\nexport const setLanguageType = (newLanguage: LanguageType) => {\n  language = newLanguage;\n}\n\nexport default function Translate(\n  text: string,\n  specifier: string[] | null = null,\n  substitution: Record<string, string | number> | null = null,\n  addSpaces: [boolean, boolean] | null = null\n): string {\n  const translationDictionary: Json = language === LanguageType.english ?\n    English as Json : French as Json;\n\n  try {\n    let translatedString = translationDictionary[text];\n\n    if (!translatedString) {\n      return (specifier ? specifier[specifier.length - 1] : text);\n    }\n\n    if (specifier) {\n      translatedString = recursiveFind(translatedString, specifier, 0);\n    }\n\n    if (substitution) {\n      Object.keys(substitution).forEach(key => {\n        const value = substitution[key];\n        const replace = new RegExp(key, \"g\");\n        translatedString = (translatedString as string).replace(replace, `${value}`);\n      });\n    }\n\n    if (addSpaces && addSpaces[0]) {\n      translatedString = \" \" + translatedString;\n    }\n\n    if (addSpaces && addSpaces[1]) {\n      translatedString += \" \";\n    }\n    return translatedString as string;\n  }\n  catch (e) {\n    return `No translation for string ${text}`\n  }\n}","import { Location, LocationListener, UnregisterCallback } from 'history'\r\nimport { useEffect } from 'react'\r\nimport ReactGA from 'react-ga'\r\nimport { useHistory } from 'react-router'\r\n\r\nconst sendPageView: LocationListener = (location: Location): void => {\r\n  ReactGA.set({ page: location.pathname })\r\n  ReactGA.pageview(location.pathname)\r\n}\r\ninterface eventSenderProps {\r\n  category: string,\r\n  label: string,\r\n  action: string\r\n}\r\n\r\nlet cookieAcceptance = false;\r\n\r\nexport const sendAnalyticsEvent = (props: eventSenderProps) => {\r\n  if (cookieAcceptance) {\r\n    ReactGA.event(props)\r\n  }\r\n}\r\ninterface Props {\r\n  children: JSX.Element;\r\n  trackingId: string;\r\n}\r\nconst GAListener = ({ children, trackingId }: Props): JSX.Element => {\r\n  const isDev = process.env.NODE_ENV === \"development\";\r\n  const history = useHistory()\r\n  useEffect((): UnregisterCallback | void => {\r\n    ReactGA.initialize(trackingId,\r\n      {\r\n        titleCase: false,\r\n        debug: isDev,\r\n        gaOptions: {\r\n          cookieDomain: isDev ? 'none' : 'auto'\r\n        }\r\n      })\r\n    sendPageView(history.location, 'REPLACE')\r\n    return history.listen(sendPageView)\r\n  }, [history, isDev, trackingId])\r\n\r\n  return children\r\n}\r\n\r\nexport default GAListener","import { faLinkedin, faTwitter } from '@fortawesome/free-brands-svg-icons';\nimport { faEnvelope } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport { useMediaQuery } from \"react-responsive\";\nimport { mobileDeviceOrTabletWidth } from \"../../constants\";\nimport Translate from \"../../utils/translate/translateService\";\nimport './static.css';\nimport { sendAnalyticsEvent } from '../../utils/analyticsUtils';\nimport HealthAgencyLogo from '../../assets/images/public-health-agency.png';\nimport UcalgaryLogo from '../../assets/images/University-Of-Calgary-Logo.png';\n\nexport default function About() {\n    const isMobileDeviceOrTablet = useMediaQuery({ maxWidth: mobileDeviceOrTabletWidth })\n\n    const selectItem = (label: string, name: string) => {\n        sendAnalyticsEvent({\n            category: 'Social Media Link',\n            action: 'click',\n            label: `${label} - ${name}`\n        })\n    }\n\n    const selectLink = (link: string) => {\n        sendAnalyticsEvent({\n            category: 'About Page Link',\n            action: 'click',\n            label: link\n        })\n    }\n\n    function renderBioBlock(name: string,\n        description: string[],\n        linkedIn: string | null = null,\n        email: string | null = null,\n        twitter: string | null = null) {\n        return (\n            <div>\n                <b>\n                    {name}\n                </b>\n                <br />\n                {description.map((line) => {\n                    return (\n                        <div key={line}>\n                            {line}\n                            <br />\n                        </div>\n                    )\n                })}\n                {linkedIn ? <a href={linkedIn} onClick={() => selectItem('LinkedIn', name)} target=\"_blank\" rel=\"noopener noreferrer\"><FontAwesomeIcon icon={faLinkedin} className=\"mr-1 linked-in\" /></a> : null}\n                {twitter ? <a href={twitter} onClick={() => selectItem('Twitter', name)} target=\"_blank\" rel=\"noopener noreferrer\"><FontAwesomeIcon icon={faTwitter} className=\"mx-1 twitter\" /></a> : null}\n                {email ? <a href={`mailto:${email}`} onClick={() => selectItem('Email', name)}><FontAwesomeIcon icon={faEnvelope} className=\"ml-1 email\" /></a> : null}\n            </div>\n        )\n    }\n    return (\n        <div className=\"page col-12\">\n            <div className={isMobileDeviceOrTablet ? \"pb-2\" : \"static-content pb-2\"}>\n                <h1>\n                    {Translate('AboutSeroTracker')}\n                </h1>\n                <p>\n                    {Translate('AboutPage', ['AboutSection', 'PartOne'])}<b>{Translate('AboutPage', ['AboutSection', 'PartTwo'], null, [true, false])}</b>\n                </p>\n                <p>\n                    <a href=\"https://www.covid19immunitytaskforce.ca/\" className=\"pr-2\" target=\"__blank\" rel=\"noopener noreferrer\">\n                        <img src=\"https://www.covid19immunitytaskforce.ca/wp-content/themes/pena-lite-child/CITF_logo_ENG.svg\" alt=\"COVID-19 Immunity Task Force Logo\" height=\"45\"></img>\n                    </a>\n                    <a href=\"https://www.canada.ca/en/public-health.html/\" className=\"px-2\" target=\"__blank\" rel=\"noopener noreferrer\">\n                        <img src={HealthAgencyLogo} alt=\"Public Health Agency Logo\" height=\"45\"></img>\n                    </a>\n                    <a href=\"https://cumming.ucalgary.ca/centres/centre-health-informatics\" className=\"px-2\" target=\"__blank\" rel=\"noopener noreferrer\">\n                        <img src={UcalgaryLogo} alt=\"Centre for Health Informatics\" height=\"40\"></img>\n                    </a>\n                </p>\n                <p> \n                    {Translate('AboutPage', ['AboutSection', 'SupportedBy'])}\n                    <a onClick={() => selectLink('Public Health Agency')} href=\"https://www.canada.ca/en/public-health.html\">{Translate('AboutPage', ['AboutSection', 'PublicHealthAgency'], null, [true, true])}</a>\n                    {Translate('AboutPage', ['AboutSection', 'HostedAt'])}                    \n                    <a onClick={() => selectLink('Centre for Health Informatics')} href=\"https://cumming.ucalgary.ca/centres/centre-health-informatics\">{Translate('AboutPage', ['AboutSection', 'HealthInformatics'], null, [true, true])}</a>\n                </p>\n                <p>\n                    {Translate('AboutPage', ['AboutSection', 'OurWorkIs'])}\n                    <a onClick={() => selectLink('ITF Website')} href=\"https://www.covid19immunitytaskforce.ca/\">{Translate('AboutPage', ['AboutSection', 'Covid19ImmunityTaskForce'], null, [true, true])}</a>\n                     {Translate('AboutPage', ['AboutSection', 'WhichIsMapping'], null, [true, false])}\n                    <a onClick={() => selectLink('Serological Hub')} href=\"https://www.covid19immunitytaskforce.ca/research/global-serological-knowledge-hub/\">{Translate('AboutPage', ['AboutSection', 'GlobalSerologicalKnowledgeHub'], null, [true, false])}</a>.\n                </p>\n                <p>\n                    <a onClick={() => selectLink('Mapbox')} href=\"https://www.mapbox.com/\">Mapbox</a> {Translate('AboutPage', ['Mapbox'])}\n                </p>\n                <h2>\n                    {Translate('ContactUs')}\n                </h2>\n                <div>\n                    <p>\n                        {Translate('AboutPage', ['ContactSection', 'BulletPointOne', 'PartOne'], null, [true, true])}\n                        <a href=\"mailto:rahul.arora@balliol.ox.ac.uk\">rahul.arora@balliol.ox.ac.uk</a>\n                        {Translate('AboutPage', ['ContactSection', 'BulletPointOne', 'PartTwo'], null, [true, true])}\n                        <a href=\"mailto:tingting.yan@mail.utoronto.ca\">tingting.yan@mail.utoronto.ca</a>.\n                        {Translate('AboutPage', ['ContactSection', 'BulletPointOne', 'PartThree'], null, [true, true])}\n                        <a href=\"mailto:media@covid19immunitytaskforce.ca\">media@covid19immunitytaskforce.ca</a>\n                        {Translate('AboutPage', ['ContactSection', 'BulletPointOne', 'PartFour'], null, [true, true])}\n                        <a href=\"mailto:kelly.johnston2@ucalgary.ca\">kelly.johnston2@ucalgary.ca</a>.\n                    </p>\n                    <p>\n                        {Translate('AboutPage', ['ContactSection', 'BulletPointFive', 'PartOne'])}\n                        <b>{Translate('AboutPage', ['ContactSection', 'BulletPointFive', 'PartTwo'], null, [true, false])}</b>\n                        {Translate('AboutPage', ['ContactSection', 'BulletPointFive', 'PartThree'], null, [true, true])}\n                        <a onClick={() => selectLink('Form Open')} rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://forms.gle/XWHQ7QPjQnzQMXSz8\">{Translate('ThisForm').toLowerCase()}</a>.\n                    </p>\n                </div>\n                <h1>\n                    {Translate('OurTeam')}\n                </h1>\n                <h2 className=\"team-name-text\">\n                    {Translate('TeamLead')}\n                </h2>\n                <div className=\"bio-grid-container\">\n                    {renderBioBlock('Rahul Arora', [Translate('UniversityOf', null, { \"NAME\": \"Oxford\" }), Translate('UniversityOf', null, { \"NAME\": \"Calgary\" })], 'https://www.linkedin.com/in/rahularorayyc/', 'rahularoradfs@gmail.com', 'https://mobile.twitter.com/RahulAroraAB')}\n                    {renderBioBlock('Tingting Yan', [Translate('UniversityOf', null, { \"NAME\": \"Toronto\" })], 'https://www.linkedin.com/in/tingting-yan/', '', 'https://twitter.com/TingtingYan_')}\n                </div>\n                <h2 className=\"team-name-text\">\n                    {Translate('ResearchTeam')}\n                </h2>\n                <div className=\"bio-grid-container\">\n                    {renderBioBlock('Niklas Bobrovitz ', [Translate('UniversityOf', null, { \"NAME\": \"Oxford\" }), Translate('UniversityOf', null, { \"NAME\": \"Toronto\" })], 'https://www.linkedin.com/in/nik-bobrovitz-19a117179/', 'niklas.bobrovitz@mail.utoronto.ca', 'https://twitter.com/nikbobrovitz')}\n                    {renderBioBlock('Emily Boucher', [Translate('SchoolName', ['Cumming']), Translate('UniversityOf', null, { \"NAME\": \"Calgary\" })], null, 'emily.boucher@ucalgary.ca')}\n                    {renderBioBlock('Hannah Rahim', [Translate('UniversityOf', null, { \"NAME\": \"Calgary\" })], 'https://www.linkedin.com/in/hannah-rahim/', 'hannahrahim2@gmail.com', 'https://twitter.com/Hannah_Rahim1')}\n                    {renderBioBlock('Christian Cao', [Translate('UniversityOf', null, { \"NAME\": \"Calgary\" })], 'https://ca.linkedin.com/in/christian-cao-275b78190', 'ccao.canada@gmail.com')}\n                    {renderBioBlock('Claire Donnici', [Translate('UniversityOf', null, { \"NAME\": \"Calgary\" })], null, 'claire.donnici@ucalgary.ca', 'https://twitter.com/ClaireDonnici')}\n                    {renderBioBlock('Natasha Ilincic', [Translate('UniversityOf', null, { \"NAME\": \"Guelph\" })], 'https://www.linkedin.com/in/natasha-ilincic/', 'natasha.ilincic@gmail.com')}\n                    {renderBioBlock('Michael Liu', [Translate('UniversityOf', null, { \"NAME\": \"Oxford\" }), Translate('BlankUniversity', null, { \"NAME\": \"Harvard\" })], 'https://www.linkedin.com/in/michael-liu-8728249a/', 'liu.michael222@gmail.com', 'https://twitter.com/mliu_canada')}\n                    {renderBioBlock('Mitchell Segal', [Translate('UniversityOf', null, { \"NAME\": \"Toronto\" })], null, 'mitchell.segal@mail.utoronto.ca')}\n                    {renderBioBlock('Lucas Penny', [Translate('UniversityOf', null, { \"NAME\": \"Toronto\" })], 'https://www.linkedin.com/in/lucaspenny/', 'lucas.penny@mail.utoronto.ca', 'https://twitter.com/lucasjpenny')}\n                </div>\n                <h2 className=\"team-name-text\">\n                    Development Team\n                </h2>\n                <div className=\"bio-grid-container\">\n                    {renderBioBlock('Austin Atmaja', [Translate('UniversityOf', null, { \"NAME\": \"Waterloo\" })], 'https://www.linkedin.com/in/austinatmaja', 'atatmaja@uwaterloo.ca', 'https://twitter.com/atatmaja_')}\n                    {renderBioBlock('Abel Joseph ', [Translate('UniversityOf', null, { \"NAME\": \"Waterloo\" })], 'https://www.linkedin.com/in/abel-joseph/', 'abel.joseph@uwaterloo.ca')}\n                    {renderBioBlock('Ewan May', [Translate('SchoolName', ['Schulich']), Translate('UniversityOf', null, { \"NAME\": \"Calgary\" })], 'https://www.linkedin.com/in/ewan-may', 'ewan.may@ucalgary.ca')}\n                    {renderBioBlock('Brett Dziedzic', [Translate('UniversityOf', null, { \"NAME\": \"Lethbridge\" })], 'https://www.linkedin.com/in/brett-dziedzic/', 'brettdziedzic@gmail.com')}\n                    {renderBioBlock('Simona Rocco', [Translate('UniversityOf', null, { \"NAME\": \"Waterloo\" })], 'https://www.linkedin.com/in/simona-rocco/', 'serocco@uwaterloo.ca')}\n                    {renderBioBlock('Jordan Van Wyk', [Translate('UniversityOf', null, { \"NAME\": \"Waterloo\" })], 'https://www.linkedin.com/in/jordanvanwyk/', 'jordanvanwyk@outlook.com', 'https://twitter.com/jordanvw_')}\n                    {renderBioBlock('Joanna Chen', [Translate('UniversityOf', null, { \"NAME\": \"Waterloo\" })], 'https://www.linkedin.com/in/linkjoannachen/', 'sl5chen@uwaterloo.ca', 'https://twitter.com/thejoannachen')}\n                </div>\n                <h2 className=\"team-name-text\">\n                    {Translate('PrivateSectorMonitoringTeam')}\n                </h2>\n                <div className=\"bio-grid-container\">\n                    {renderBioBlock('Nathan Duarte', [Translate('UniversityOf', null, { \"NAME\": \"Waterloo\" })], 'https://www.linkedin.com/in/duartenathan/', 'nathanduarte1@gmail.com', 'https://twitter.com/_nathan_duarte_')}\n                    {renderBioBlock('Abhinav Pillai\t', [Translate('UniversityOf', null, { \"NAME\": \"Calgary\" })], null, 'abhinav.arunpillai@ucalgary.ca')}\n                    {renderBioBlock('Natalie Duarte', [], null, 'natalieaduarte@gmail.com')}\n                    {renderBioBlock('Madeleine Rocco', [Translate('BlankUniversity', null, { \"NAME\": \"Western\" })], 'https://www.linkedin.com/in/madeleine-rocco/', 'madeleinerocco@gmail.com')}\n                    {renderBioBlock('Jamie Chen', [Translate('BlankUniversity', null, { \"NAME\": \"Johns Hopkins\" })], 'https://www.linkedin.com/in/jamieechen/', 'jamieevelynchen@gmail.com')}\n                </div>\n                <h2 className=\"team-name-text\">\n                    {Translate('ScientificAdvisorsAndCollaborators')}\n                </h2>\n                <div className=\"bio-grid-container\">\n                    {renderBioBlock('Tim Evans', [Translate('Biographies', ['Tim', 'PartOne']), Translate('Biographies', ['Tim', 'PartTwo'])])}\n                    {renderBioBlock('Tyler Williamson', [Translate('Biographies', ['Tyler', 'PartOne']), Translate('Biographies', ['Tyler', 'PartTwo'])])}\n                    {renderBioBlock('Matthew Cheng', [Translate('Biographies', ['Matthew', 'PartOne']), Translate('Biographies', ['Matthew', 'PartTwo'])])}\n                    {renderBioBlock('David Naylor', [Translate('Biographies', ['DavidN', 'PartOne']), Translate('Biographies', ['DavidN', 'PartTwo'])])}\n                    {renderBioBlock('David Buckeridge', [Translate('Biographies', ['DavidB', 'PartOne']), Translate('Biographies', ['DavidB', 'PartTwo'])])}\n                    {renderBioBlock('Bruce Mazer', [Translate('Biographies', ['BruceM', 'PartOne']), Translate('Biographies', ['BruceM', 'PartTwo'])])}\n                    {renderBioBlock('Jesse Papenburg', [Translate('Biographies', ['Jesse', 'PartOne']), Translate('Biographies', ['Jesse', 'PartTwo'])])}\n                    {renderBioBlock('Jonathan Chevrier', [Translate('Biographies', ['Jonathan', 'PartOne']), Translate('Biographies', ['Jonathan', 'PartTwo'])])}\n                    {renderBioBlock('Catherine Hankins', [Translate('Biographies', ['CatherineH', 'PartOne']), Translate('Biographies', ['CatherineH', 'PartTwo'])])}\n                    {renderBioBlock('Erin O\\'Connor', [Translate('Biographies', ['ErinO', 'PartOne']), Translate('Biographies', ['ErinO', 'PartTwo'])])}\n                    {renderBioBlock('Catherine Eastwood', [Translate('Biographies', ['CatherineE', 'PartOne']), Translate('Biographies', ['CatherineE', 'PartTwo'])])}\n                </div>\n            </div>\n        </div>\n    )\n}\n","export const mobileDeviceOrTabletWidth = 1200;\r\nexport const mobileDeviceWidth = 600;","import React, { useEffect } from \"react\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport { mobileDeviceOrTabletWidth } from \"../../constants\";\r\nimport Translate from \"../../utils/translate/translateService\";\r\nimport './static.css';\r\n\r\nexport default function CookiePolicy() {\r\n  const isMobileDeviceOrTablet = useMediaQuery({ maxDeviceWidth: mobileDeviceOrTabletWidth })\r\n\r\n  useEffect(() => {\r\n    const script = document.createElement('script');\r\n\r\n    script.text = \"(function(d, s, id) { var js, tjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = 'https://app.termly.io/embed-policy.min.js'; tjs.parentNode.insertBefore(js, tjs); }(document, 'script', 'termly-jssdk'));\"\r\n\r\n    document.body.appendChild(script);\r\n\r\n    return () => {\r\n      document.body.removeChild(script);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"col-12 page\">\r\n      <div className={isMobileDeviceOrTablet ? \"pb-2 policy-container flex fill\" : \"policy-container static-content pb-2 flex fill\"}>\r\n        <h1 className=\"col-12 p-0 fit\">\r\n          {Translate('CookiePolicy')}\r\n        </h1>\r\n        <iframe title=\"CookiePolicy\" className=\"fill policy-iframe\" src=\"https://app.termly.io/embed/terms-of-use/4cfb8f90-983a-40b4-bea2-2cdd373f14b5\"></iframe>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { createContext, Dispatch, useReducer } from \"react\";\nimport { AirtableRecord, Filters, FilterType, LanguageType, State } from \"./types\";\nimport Translate from \"./utils/translate/translateService\";\n\nexport const AppContext = createContext({} as [State, Dispatch<Record<string, any>>]);\n\nexport function getEmptyFilters(): Filters {\n  return {\n    source_type: new Set(),\n    study_status: new Set(),\n    test_type: new Set(),\n    country: new Set(),\n    population_group: new Set(),\n    sex: new Set(),\n    age: new Set(),\n    risk_of_bias: new Set(),\n    isotypes_reported: new Set(),\n    specimen_type: new Set(),\n    publish_date: new Set(),\n    estimate_grade: new Set()\n  }\n}\n\nexport function getDefaultFilters(): Filters {\n  return {\n    source_type: new Set([\n      Translate('SourceTypeOptions', ['Preprint']),\n      Translate('SourceTypeOptions', ['Publication']),\n      Translate('SourceTypeOptions', ['InstitutionalReport'])\n    ]),\n    study_status: new Set(),\n    test_type: new Set(),\n    country: new Set(),\n    population_group: new Set([\n      Translate('PopulationGroupOptions', ['GeneralPopulation']),\n      Translate('PopulationGroupOptions', ['BloodDonors']),\n      Translate('PopulationGroupOptions', ['ResidualSera']),\n    ]),\n    sex: new Set(),\n    age: new Set(),\n    risk_of_bias: new Set(),\n    isotypes_reported: new Set(),\n    specimen_type: new Set(),\n    publish_date: new Set(),\n    estimate_grade: new Set([\n      Translate('EstimateGradeOptions', ['National']),\n      Translate('EstimateGradeOptions', ['Regional']),\n    ])\n  }\n}\n\n// Note: filters = elements that user has chosen to filter by\n// filter_options = all the elements that users could filter by\nconst initial_filters: Filters = getDefaultFilters();\n\nconst initialState: State = {\n  healthcheck: '',\n  airtable_records: [],\n  filtered_records: [],\n  estimate_grade_prevalences: [],\n  filters: initial_filters,\n  filter_options: getEmptyFilters(),\n  all_filter_options: getEmptyFilters(),\n  data_page_state: {\n    mapOpen: true\n  },\n  language: LanguageType.english,\n  updated_at: '',\n  country_prevalences: [],\n  showCookieBanner: false,\n  showAnalyzePopup: true\n};\n\nexport function filterRecords(filters: Filters, records: AirtableRecord[]) {\n  const return_records: AirtableRecord[] = []\n  if (records) {\n    records.forEach((record: AirtableRecord) => {\n      if(filter_function(record, filters)){\n        return_records.push(record);\n      }\n    })\n  }\n  return return_records;\n}\n\nfunction filter_function(record: Record<string, any>, filters: Filters){\n  const array = Object.keys(filters).map((filter_key) => {  \n    if ((filters[filter_key as FilterType] instanceof Set) && (filters[filter_key as FilterType].size > 0)) {\n      if (record[filter_key] === null) {\n        return false;\n      }\n      // Handle case where field to be filtered is an array\n      if (Array.isArray(record[filter_key])) {\n        // Note: isotypes filter works on an 'and' basis\n        // Unlike other filters, which work on an 'or' basis\n        // TODO: make logic flow here more generalized in case we need other filters in the future with similar behaviour\n        if (filter_key === 'isotypes_reported') {\n          let match = true;\n          filters[filter_key].forEach((item: string) => {\n            if (!(record[filter_key].includes(item))) {\n              match = false;\n            }\n          });\n          return match;\n        }\n\n        if (filter_key === 'publish_date') {\n          const publishDate = record[filter_key];\n          const dateInMillis = publishDate instanceof Array ? Date.parse(publishDate[0] as string) : Date.parse(publishDate as string)\n          const dates: number[] = Array.from(filters[filter_key].values())\n          return dateInMillis >= dates[0] && dateInMillis <= dates[1]\n        }\n        // Iterate through the record's values and check if any of them\n        // match the values accepted by the filter\n        let in_filter = false;\n        for (let i = 0; i < record[filter_key].length; i++) {\n          if (filters[filter_key as FilterType].has(record[filter_key][i])) {\n            in_filter = true;\n            break;\n          }\n        }\n        if (!in_filter) {\n          return false;\n        }\n      }\n      else {\n        if (!(filters[filter_key as FilterType].has(record[filter_key]))) {\n          return false;\n        }\n      }\n    }\n  }) \n  return !array.some(o => o === false);\n}\n\n// export function filterRecords(filters: Filters, records: AirtableRecord[]) {\n//   const filter_function = buildFilterFunction(filters);\n//   if (records) {\n//     const filtered_records = records.filter(filter_function);\n//     return filtered_records\n//   }\n//   return [];\n// }\n\nfunction recomputeFilterOptions(records: AirtableRecord[], all_filter_options: Filters, filters: Filters) {\n  const options = getFilterOptions(records);\n  for (const filter in filters) {\n    // If the filter is already in use, show all filter options\n    // Since options within the same filter work on an \"or basis\"\n    // (e.g. risk_of_bias: [\"Low\", \"Medium\"] means include records with Low or Medium bias)\n    // the user will never get 0 records back if they choose more filter options for a filter\n    // that they've already selected an option for\n    if (filters[filter as FilterType].size > 0) {\n      options[filter as FilterType] = all_filter_options[filter as FilterType];\n    }\n  }\n  return options;\n}\n\nfunction getFilterOptions(records: AirtableRecord[]) {\n  const filter_options: Filters = getEmptyFilters();\n\n  if (!records) {\n    return filter_options;\n  }\n  records.forEach((record: AirtableRecord) => {\n    // TODO: Refactor to be more DRY\n    if ((record.seroprevalence !== null) && (record.denominator !== null)) {\n      if (record.country) {\n        filter_options.country.add(record.country);\n      }\n      if (record.study_status) {\n        filter_options.study_status.add(record.study_status);\n      }\n      if (record.source_type) {\n        filter_options.source_type.add(record.source_type);\n      }\n      if (record.sex) {\n        filter_options.sex.add(record.sex);\n      }\n      if (record.risk_of_bias) {\n        filter_options.risk_of_bias.add(record.risk_of_bias);\n      }\n      if (record.estimate_grade) {\n        filter_options.estimate_grade.add(record.estimate_grade);\n      }\n      if (record.test_type) {\n        record.test_type.forEach((test_type) => {\n          filter_options.test_type.add(test_type);\n        })\n      }\n      if (record.population_group) {\n        record.population_group.forEach((population_group) => {\n          filter_options.population_group.add(population_group);\n        });\n      }\n      if (record.age) {\n        record.age.forEach((age) => {\n          filter_options.age.add(age);\n        });\n      }\n      if (record.isotypes_reported) {\n        record.isotypes_reported.forEach((isotype_reported) => {\n          if (isotype_reported !== 'Not reported') {\n            filter_options.isotypes_reported.add(isotype_reported);\n          }\n        });\n      }\n      if (record.specimen_type && record.specimen_type !== 'Not reported') {\n        filter_options.specimen_type.add(record.specimen_type);\n      }\n    }\n  });\n\n  return filter_options;\n}\n\nconst reducer = (state: State, action: Record<string, any>): State => {\n  const new_filters: any = state.filters;\n  let filtered_records: AirtableRecord[] = state.filtered_records;\n  switch (action.type) {\n    case \"HEALTHCHECK\":\n      return {\n        ...state,\n        healthcheck: action.payload\n      };\n    case \"CLOSE_COOKIE_BANNER\":\n      return {\n        ...state,\n        showCookieBanner: false\n      };\n\n    case \"OPEN_COOKIE_BANNER\":\n      return {\n        ...state,\n        showCookieBanner: true\n      };\n\n      case \"OPEN_ANALYZE_POPUP\":\n        return {\n          ...state,\n          showAnalyzePopup: true\n        };\n\n    case \"CLOSE_ANALYZE_POPUP\":\n      return {\n        ...state,\n        showAnalyzePopup: false\n      };\n\n    case \"UPDATE_ESTIMATE_PREVALENCES\":\n      return {\n        ...state,\n        estimate_grade_prevalences: action.payload\n      }\n    case \"SELECT_DATA_TAB\":\n      return {\n        ...state,\n        data_page_state: { ...state.data_page_state, mapOpen: action.payload }\n      }\n    case \"SELECT_LANGUAGE\":\n      return {\n        ...state,\n        language: action.payload\n      }\n    case \"GET_AIRTABLE_RECORDS\":\n      const all_filter_options = getFilterOptions(action.payload.airtable_records);\n      filtered_records = filterRecords(new_filters, action.payload.airtable_records);\n      const filter_options = getFilterOptions(filtered_records);\n      return {\n        ...state,\n        airtable_records: action.payload.airtable_records,\n        filtered_records,\n        updated_at: action.payload.updated_at,\n        filter_options,\n        all_filter_options\n      }\n    case \"UPDATE_FILTER\":\n      new_filters[action.payload.filter_type] = new Set(action.payload.filter_value);\n      filtered_records = filterRecords(new_filters, state.airtable_records);\n      return {\n        ...state,\n        filters: new_filters,\n        filtered_records,\n        filter_options: recomputeFilterOptions(filtered_records, state.all_filter_options, new_filters)\n      }\n    case \"UPDATE_COUNTRY_PREVALENCES\":\n      return {\n        ...state,\n        country_prevalences: action.payload\n      }\n    default:\n      return state\n  }\n};\n\nexport const AppContextProvider = (props: Record<string, any>) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  return (\n    <AppContext.Provider\n      value={[state, dispatch]}>\n      {props.children}\n    </AppContext.Provider>\n  );\n};","import { AirtableRecord, AggregatedRecord, AggregationFactor, AlternateAggregatedRecord } from \"./types\"\n\nexport default class httpClient {\n    async httpGet(url: string) {\n        let url_full = url;\n        if (process.env.REACT_APP_ROUTE) {\n            url_full = process.env.REACT_APP_ROUTE + url_full;\n        }\n        const res = await fetch(url_full);\n        if (res.status !== 200) {\n            const error_msg = res.json();\n            console.error(error_msg);\n            return;\n        }\n        else {\n            const response_json = await res.json();\n            return response_json;\n        }\n    }\n\n    async httpPost(url: string, data: Record<string, any>) {\n        let url_full = url;\n        if (process.env.REACT_APP_ROUTE) {\n            url_full = process.env.REACT_APP_ROUTE + url_full;\n        }\n        const res = await fetch(url_full, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(data) // body data type must match \"Content-Type\" header\n        });\n        if (res.status !== 200) {\n            const error_msg = res.json();\n            console.error(error_msg);\n            return;\n        }\n        else {\n            const response_json = await res.json();\n            return response_json;\n        }\n    }\n\n    async getHealthcheck() {\n        const healthcheck: string = await this.httpGet('/healthcheck');\n        return healthcheck;\n    }\n\n    async getAirtableRecords() {\n        const response = await this.httpGet('/airtable_scraper/records')\n        if (!response || !(\"records\" in response) || !(\"updated_at\" in response)) {\n            return [];\n        }\n        const airtable_records = response.records!.map((item: Record<string, any>) => {\n            // Convert response to AirtableRecord type\n            const record: AirtableRecord = {\n                source_name: item.SOURCE_NAME ? item.SOURCE_NAME[0] : null,\n                lead_org: item.LEAD_ORG ? item.LEAD_ORG[0] : null,\n                first_author: item.FIRST_AUTHOR ? item.FIRST_AUTHOR[0] : null,\n                source_type: item.SOURCE_TYPE ? item.SOURCE_TYPE[0] : null,\n                study_status: item.STUDY_STATUS ? item.STUDY_STATUS[0] : null,\n                study_type: item.STUDY_TYPE,\n                test_type: item.TEST_TYPE,\n                specimen_type: item.SPECIMEN_TYPE ? item.SPECIMEN_TYPE[0] : null,\n                isotypes_reported: item.ISOTYPES,\n                manufacturer: item.MANUFACTURER,\n                approving_regulator: item.APPROVAL,\n                sensitivity: item.SENSITIVITY,\n                specificity: item.SPECIFICITY,\n                publish_date: item.PUB_DATE,\n                publisher: item.PUBLISHER,\n                country: item.COUNTRY ? item.COUNTRY[0] : null,\n                state: item.STATE,\n                city: item.CITY,\n                population_group: item.POPULATION_GROUP,\n                sex: item.SEX,\n                age: item.AGE,\n                denominator: item.DENOMINATOR,\n                summary: item.SUMMARY,\n                seroprevalence: item.SERUM_POS_PREVALENCE,\n                sample_size: item.SAMPLE_SIZE,\n                sampling_method: item.SAMPLING,\n                sampling_start_date: item.SAMPLING_START,\n                sampling_end_date: item.SAMPLING_END,\n                risk_of_bias: item.OVERALL_RISK_OF_BIAS ? item.OVERALL_RISK_OF_BIAS[0] : null,\n                url: item.URL ? item.URL[0] : null,\n                include_in_n: item.INCLUDE_IN_N ? true : false,\n                estimate_grade: item.ESTIMATE_GRADE\n            };\n\n            return record;\n        });\n\n        // Remove timestamp from updated at string\n        const updated_at_words = response.updated_at!.split(\" \", 4);\n        const updated_at_string = updated_at_words.join(\" \");\n\n        return {\n            airtable_records,\n            updated_at: updated_at_string\n        };\n    }\n\n    async getEstimateGrades(records: AirtableRecord[]) {\n        const formattedRecords = records.map(o => {\n            return {\n                country: o.country,\n                estimate_grade: o.estimate_grade,\n                serum_pos_prevalence: o.seroprevalence,\n                denominator: o.denominator\n            }\n        })\n        const req_body = {\n            records: formattedRecords\n        }\n        const response = await this.httpPost('/airtable_scraper/country_seroprev_summary', req_body);\n        if (!response) {\n            return [];\n        }\n        const formattedResponse = response.map((record: Record<string, any>) => {\n            // Convert response to AlternateAggregatedRecord type         \n            const estimateSummary = record.seroprevalence_estimate_summary;\n            return {\n                numberOfStudies: record.n_estimates,\n                testsAdministered: record.n_tests_administered,\n                geographicalName: record.country,\n                localEstimate: {\n                    maxEstimate: estimateSummary.Local.max_estimate,\n                    minEstimate: estimateSummary.Local.min_estimate,\n                    numEstimates: estimateSummary.Local.n_estimates,\n                },                \n                nationalEstimate: {\n                    maxEstimate: estimateSummary.National.max_estimate,\n                    minEstimate: estimateSummary.National.min_estimate,\n                    numEstimates: estimateSummary.National.n_estimates,\n                },                \n                regionalEstimate: {\n                    maxEstimate: estimateSummary.Regional.max_estimate,\n                    minEstimate: estimateSummary.Regional.min_estimate,\n                    numEstimates: estimateSummary.Regional.n_estimates,\n                },                \n                sublocalEstimate: {\n                    maxEstimate: estimateSummary.Sublocal.max_estimate,\n                    minEstimate: estimateSummary.Sublocal.min_estimate,\n                    numEstimates: estimateSummary.Sublocal.n_estimates,\n                }\n            }\n        });\n\n        return formattedResponse;\n    }\n\n    async postMetaAnalysis(records: AirtableRecord[], aggregation_variable: AggregationFactor, meta_analysis_technique: string = 'fixed', meta_analysis_transformation: string = 'double_arcsin_precise') {\n        // Note: while the rest of the aggregation variables can stay consistent with frontend nomenclature\n        // the aggregation variable \"country\" must be changed to \"COUNTRY\"\n        const formatted_agg_var = aggregation_variable === AggregationFactor.country ? \"COUNTRY\" : aggregation_variable;\n        const formatted_records = records!.filter(item => item[aggregation_variable] != null).map((item: AirtableRecord) => {\n            // Note, all aggregation variable fields must be string arrays\n            const record: Record<string, any> = {\n                SERUM_POS_PREVALENCE: item.seroprevalence,\n                DENOMINATOR: item.denominator,\n                COUNTRY: [item.country]\n            };\n            if (aggregation_variable !== AggregationFactor.country) {\n                record[aggregation_variable] = Array.isArray(item[aggregation_variable]) ? item[aggregation_variable] : [item[aggregation_variable]];\n            }\n            return record;\n        });\n\n        const req_body = {\n            records: formatted_records,\n            aggregation_variable: formatted_agg_var,\n            meta_analysis_technique,\n            meta_analysis_transformation\n        };\n\n        const response = await this.httpPost('/meta_analysis/records', req_body);\n        if (response) {\n            // Convert response to aggregatedRecord object\n            const formatted_response: AggregatedRecord[] = Object.keys(response).filter((key: string) => response[key] !== null).map((key: string) => {\n                return {\n                    error: response[key].error_percent,\n                    n: response[key].total_N,\n                    name: key,\n                    num_studies: response[key].n_studies,\n                    seroprevalence: response[key].seroprevalence_percent,\n                }\n            });\n            return formatted_response;\n        }\n        return response;\n    }\n\n    // Aggregation of all records, to support TotalStats view\n    // TODO: Consolidate this function with postMetaAnalysis\n    async postMetaAnalysisAll(records: AirtableRecord[], meta_analysis_technique: string = 'fixed', meta_analysis_transformation: string = 'double_arcsin_precise') {\n        const formatted_records = records!.map((item: AirtableRecord) => {\n            const record = {\n                SERUM_POS_PREVALENCE: item.seroprevalence,\n                DENOMINATOR: item.denominator,\n                COUNTRY: [item.country]\n            };\n            return record;\n        });\n\n        const req_body = {\n            records: formatted_records,\n            meta_analysis_technique,\n            meta_analysis_transformation\n        };\n\n        const response = await this.httpPost('/meta_analysis/records', req_body);\n        const formatted_response = {\n            error: response.error_percent,\n            n: response.total_N,\n            countries: response.countries,\n            num_studies: response.n_studies,\n            seroprevalence: response.seroprevalence_percent\n        }\n        return formatted_response;\n    }\n}","import _ from \"lodash\";\r\n\r\nexport const toPascalCase = (str: string) => _.upperFirst(_.camelCase(str));","\r\nimport * as Countries from 'i18n-iso-countries';\r\nimport English from \"i18n-iso-countries/langs/en.json\";\r\nimport French from \"i18n-iso-countries/langs/fr.json\";\r\nimport { Layer, LeafletMouseEvent } from 'leaflet';\r\nimport React from 'react';\r\nimport ReactDOMServer from 'react-dom/server';\r\nimport { Map, MapProps } from 'react-leaflet';\r\nimport { LanguageType, AggregatedRecord, AlternateAggregatedRecord, RegionalPrevalenceEstimate } from \"../types\";\r\nimport { toPascalCase } from './translate/caseChanger';\r\nimport Translate from './translate/translateService';\r\n\r\nexport const getBuckets = (features: GeoJSON.Feature[]) => {\r\n  // This is some javascript voodoo to get maxSeroprevalence\r\n  const maxSeroprevalence = Math.max.apply(Math, features.filter(o => o.properties?.seroprevalence).map((o) => o?.properties?.seroprevalence));\r\n  const roundedMax = Math.ceil(maxSeroprevalence);\r\n  const maxLogit = getLogit(roundedMax);\r\n\r\n  // This is an arbitrary value that I chose because on the logit scale\r\n  // as you decrease in size you approach infinity, not 0\r\n  const lowerEnd = -7;\r\n  const differenceScale = maxLogit - lowerEnd\r\n  const bucketSegments = 6\r\n  const step = differenceScale / bucketSegments;\r\n  const buckets = [0];\r\n  for (let x = 1; x <= 6; x++) {\r\n    const logitStep = parseFloat(getDecimalFromLogit(-7 + step * x).toFixed(1));\r\n    buckets.push(logitStep);\r\n  }\r\n  return buckets;\r\n}\r\n\r\nconst getLogit = (percentage: number) => {\r\n  const decimal = percentage / 100;\r\n  return Math.log(decimal) - Math.log(1 - decimal);\r\n}\r\n\r\nconst getDecimalFromLogit = (logit: number) => {\r\n  return Math.exp(logit) / (Math.exp(logit) + 1) * 100\r\n}\r\n\r\n\r\nexport const getMapUrl = (language: LanguageType) => {\r\n  return language === LanguageType.english ? 'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token='\r\n    : 'https://api.mapbox.com/styles/v1/serotracker/ckb5pp5aj33xn1it8hivdofiv/tiles/512/{z}/{x}/{y}?access_token='\r\n}\r\n\r\nexport const colors = ['#76E57F', '#62CA7C', '#4FB079', '#3B9577', '#277A74', '#146071', '#00456E', \"#EEEEEE\"]\r\n\r\nexport const getColor = (d: number | null, buckets: number[]) => {\r\n  if (d === null) return colors[7];\r\n\r\n  return d < buckets[1] ? colors[0] :\r\n    d < buckets[2] ? colors[1] :\r\n      d < buckets[3] ? colors[2] :\r\n        d < buckets[4] ? colors[3] :\r\n          d < buckets[5] ? colors[4] :\r\n            d < buckets[6] ? colors[5] :\r\n              colors[6]\r\n}\r\n\r\nCountries.registerLocale(English);\r\nCountries.registerLocale(French);\r\n\r\nexport const getCountryName = (country: string, language: LanguageType, optionString: string) => {\r\n  const code = Countries.getAlpha2Code(country, 'en');\r\n  const translatedCountryName = Countries.getName(code, language);\r\n  const displayText = translatedCountryName ? translatedCountryName : Translate(optionString, [toPascalCase(country)]);\r\n  return displayText;\r\n}\r\n\r\n// This refers to the old map that displayed seroprevalences directly\r\nexport const style = (feature: GeoJSON.Feature<GeoJSON.Geometry, any> | undefined, buckets: number[]) => {\r\n  return {\r\n    fillColor: getColor(feature?.properties?.seroprevalence, buckets),\r\n    weight: 1,\r\n    opacity: 1,\r\n    color: 'white',\r\n    dashArray: '0',\r\n    fillOpacity: 0.7,\r\n    zIndex: 650\r\n  }\r\n}\r\n\r\nexport const altStyle = (feature: GeoJSON.Feature<GeoJSON.Geometry, any> | undefined, buckets: number[]) => {\r\n  return {\r\n    fillColor: feature?.properties?.geographicalName ? colors[6] : colors[7],\r\n    weight: 1,\r\n    opacity: 1,\r\n    color: 'white',\r\n    dashArray: '0',\r\n    fillOpacity: 0.7,\r\n    zIndex: 650\r\n  }\r\n}\r\n\r\nexport const highlightFeature = (e: LeafletMouseEvent) => {\r\n  const layer = e.target;\r\n  layer.setStyle({\r\n    weight: 5,\r\n    color: '#666',\r\n    dashArray: '',\r\n    fillOpacity: 0.7,\r\n    zIndex: 200\r\n  });\r\n  layer.bringToFront();\r\n\r\n}\r\n\r\nexport const resetHighlight = (e: LeafletMouseEvent) => {\r\n  const layer = e.target;\r\n\r\n  layer.setStyle({\r\n    weight: 2,\r\n    opacity: 1,\r\n    color: 'white',\r\n    dashArray: '',\r\n    fillOpacity: 0.7\r\n  });\r\n};\r\n\r\n// This refers to the old map that displayed seroprevalences directly\r\nexport const createPopup = (properties: any, language: LanguageType) => {\r\n  if (properties.seroprevalence) {\r\n    let error = properties?.error;\r\n    return (\r\n      <div className=\"col-12 p-0 flex\">\r\n        <div className=\"col-12 p-0 popup-header\">{getCountryName(properties.name, language, \"CountryOptions\")}</div>\r\n        <div className=\"col-12 p-0 popup-content\">{Translate(\"Seroprevalence\")}: {properties?.seroprevalence.toFixed(2)}%</div>\r\n        <div className=\"col-12 p-0 popup-content\">{Translate(\"95%ConfidenceInterval\")}: {(properties?.seroprevalence - error[0]).toFixed(2)}%-{(properties?.seroprevalence + error[1]).toFixed(2)}%</div>\r\n        <div className=\"col-12 p-0 popup-content\">{Translate(\"TotalTests\")}: {properties?.n}</div>\r\n        <div className=\"col-12 p-0 popup-content\">{Translate('TotalEstimates')}: {properties?.num_studies}</div>\r\n      </div>)\r\n  };\r\n  return (\r\n    <div className=\"col-12 p-0 flex\">\r\n      <div className=\"col-12 p-0 popup-header\">{getCountryName(properties.name, language, \"CountryOptions\")}</div>\r\n      <div className=\"col-12 p-0 flex popup-content\">{Translate('NoData')}</div>\r\n    </div>)\r\n}\r\n\r\nconst createPopupGeographySection = (regionalEstimate: RegionalPrevalenceEstimate, title: string, isLastSection?: boolean) => {\r\n  const minString = `${(regionalEstimate.minEstimate * 100).toFixed(2)}%`\r\n  const maxString = `${(regionalEstimate.maxEstimate * 100).toFixed(2)}%`\r\n  const regionString = minString === maxString ? minString : `${minString} - ${maxString}`;\r\n\r\n  return (\r\n      <div className={\"flex fit column \" + (!isLastSection ? 'popup-section' : '')}>\r\n        <div className=\"section-title pt-1\">{title.toUpperCase()}</div>\r\n        <div className=\"col-12 p-0 popup-content\">{Translate('EstimateRange')}: <b>{regionString}</b></div>\r\n        <div className=\"col-12 p-0 popup-content\">{Translate('NumberEstimates')}: <b>{regionalEstimate.numEstimates}</b></div>\r\n      </div>\r\n  )\r\n}\r\n\r\nexport const createAltPopup = (properties: any, language: LanguageType) => {\r\n\r\n  if (properties.testsAdministered) {\r\n    var regions: Array<any> = []\r\n    let addRegion = (r: RegionalPrevalenceEstimate, name: string) => {return (r !== undefined && r.numEstimates !== 0 ? regions.push([r,name]) : null)}\r\n    addRegion(properties.nationalEstimate,Translate('NationalEstimates'));\r\n    addRegion(properties.regionalEstimate,Translate('RegionalEstimates'));\r\n    addRegion(properties.localEstimate,Translate('LocalEstimates'));\r\n    addRegion(properties.sublocalEstimate,Translate('SublocalEstimates'));\r\n    var lastIndex = regions.length -1;\r\n\r\n    return (\r\n      <div className=\"col-12 p-0 flex column\">\r\n        <div className=\"fit popup-header popup-section\">{getCountryName(properties.geographicalName, language, \"CountryOptions\")}</div>\r\n        <div className=\"flex column fit popup-section\">\r\n          <div className=\"fit popup-content\">{Translate(\"TestsAdministered\")}: <b>{properties?.testsAdministered}</b></div>\r\n          <div className=\"fit popup-content\">{Translate('NumSeroprevalenceEstimates')}: <b>{properties?.numberOfStudies}</b></div>\r\n        </div>\r\n        {regions.map((o,i) => createPopupGeographySection(o[0],o[1],i==lastIndex))}\r\n      </div>)\r\n  };\r\n\r\n  return (\r\n    <div className=\"col-12 p-0 flex\">\r\n      <div className=\"col-12 p-0 popup-header\">{getCountryName(properties.name, language, \"CountryOptions\")}</div>\r\n      <div className=\"col-12 p-0 flex popup-content\">{Translate('NoData')}</div>\r\n    </div>)\r\n}\r\n\r\n\r\nexport const zoomToFeature = (e: LeafletMouseEvent, mapRef: React.RefObject<Map<MapProps>>\r\n) => {\r\n  const map = mapRef?.current?.leafletElement\r\n  map?.fitBounds(e.target.getBounds());\r\n};\r\n\r\n// This method sets all the functionality for each GeoJSON item\r\nexport const onEachFeature = (feature: GeoJSON.Feature, layer: Layer, mapRef: React.RefObject<Map<MapProps>>, language: LanguageType) => {\r\n\r\n  layer.bindPopup(ReactDOMServer.renderToString(createPopup(feature.properties, language)), { closeButton: false, autoPan: false });\r\n\r\n  layer.on({\r\n    mouseover: (e: LeafletMouseEvent) => {\r\n      layer.openPopup();\r\n      highlightFeature(e)\r\n    },\r\n    mouseout: (e: LeafletMouseEvent) => {\r\n      layer.closePopup();\r\n      resetHighlight(e)\r\n    },\r\n    mousemove: (e: LeafletMouseEvent) => {\r\n      layer.getPopup()?.setLatLng(e.latlng);\r\n    },\r\n    click: (e: LeafletMouseEvent) => {\r\n      zoomToFeature(e, mapRef);\r\n    }\r\n  })\r\n}\r\n\r\n// This refers to the old map that displayed seroprevalences directly\r\nexport const onAltEachFeature = (feature: GeoJSON.Feature, layer: Layer, mapRef: React.RefObject<Map<MapProps>>, language: LanguageType) => {\r\n\r\n  layer.bindPopup(ReactDOMServer.renderToString(createAltPopup(feature.properties, language)), { closeButton: false, autoPan: false });\r\n\r\n  layer.on({\r\n    mouseover: (e: LeafletMouseEvent) => {\r\n      layer.openPopup();\r\n      highlightFeature(e)\r\n    },\r\n    mouseout: (e: LeafletMouseEvent) => {\r\n      layer.closePopup();\r\n      resetHighlight(e)\r\n    },\r\n    mousemove: (e: LeafletMouseEvent) => {\r\n      layer.getPopup()?.setLatLng(e.latlng);\r\n    },\r\n    click: (e: LeafletMouseEvent) => {\r\n      zoomToFeature(e, mapRef);\r\n    }\r\n  })\r\n}\r\n\r\nexport const mapDataToFeatures = (features: GeoJSON.Feature[], prevalences: AggregatedRecord[]) => {\r\n  const prevalenceCountryDict: Record<string, AggregatedRecord> = prevalences.reduce((a: any, x: AggregatedRecord) => ({ ...a, [x.name]: x }), {});\r\n  return features.map(feature => {\r\n    const country = prevalenceCountryDict![feature?.properties?.name];\r\n    if (country && country.seroprevalence) {\r\n      const { seroprevalence, error, n, num_studies } = country;\r\n      return { ...feature, properties: { ...feature.properties, seroprevalence, error, n, num_studies } }\r\n    }\r\n    return { ...feature, properties: { ...feature.properties, seroprevalence: null, error: null, n: null, num_studies: null } }\r\n  })\r\n}\r\n\r\nexport const mapAltDataToFeatures = (features: GeoJSON.Feature[], prevalences: AlternateAggregatedRecord[]) => {\r\n  const prevalenceCountryDict: Record<string, AlternateAggregatedRecord> = prevalences.reduce((a: any, x: AlternateAggregatedRecord) => ({ ...a, [x.geographicalName]: x }), {});\r\n  return features.map(feature => {\r\n    const country: AlternateAggregatedRecord = prevalenceCountryDict![feature?.properties?.name];\r\n    if (country && country.testsAdministered) {\r\n      const { testsAdministered, geographicalName, numberOfStudies, localEstimate, nationalEstimate, regionalEstimate, sublocalEstimate } = country;\r\n      return { ...feature, properties: { ...feature.properties, testsAdministered, geographicalName, numberOfStudies, localEstimate, nationalEstimate, regionalEstimate, sublocalEstimate } }\r\n    }\r\n    return { ...feature, properties: { ...feature.properties, testsAdministered: null, geographicalName: null, numberOfStudies: null, localEstimate: null, nationalEstimate: null, regionalEstimate: null, sublocalEstimate: null } }\r\n  })\r\n}","import { faInfoCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React from \"react\";\r\nimport { Popup } from \"semantic-ui-react\";\r\nimport { sendAnalyticsEvent } from \"../../utils/analyticsUtils\";\r\n\r\ninterface InformationIconProps {\r\n  color: string;\r\n  size: \"xs\" | \"lg\" | \"sm\" | \"1x\" | \"2x\" | \"3x\" | \"4x\" | \"5x\" | \"6x\" | \"7x\" | \"8x\" | \"9x\" | \"10x\" | undefined,\r\n  position?: \"top left\" | \"top right\" | \"bottom right\" | \"bottom left\" | \"right center\" | \"left center\" | \"top center\" | \"bottom center\" | undefined,\r\n  tooltip: string | React.ReactNode;\r\n  tooltipHeader?: string;\r\n  offset: string | number;\r\n  popupSize?: \"mini\" | \"tiny\" | \"small\" | \"large\" | \"huge\";\r\n}\r\n\r\nexport default function InformationIcon(props: InformationIconProps) {\r\n  const { color, size, tooltip, tooltipHeader, offset, position, popupSize = \"small\" } = props;\r\n  return (\r\n    <div className=\"px-2\">\r\n      <Popup\r\n        key={Math.random()}\r\n        offset={offset}\r\n        position={position}\r\n        size={popupSize}\r\n        onOpen={() => {\r\n          sendAnalyticsEvent({\r\n            /** Typically the object that was interacted with (e.g. 'Video') */\r\n            category: 'Tooltip',\r\n            /** The type of interaction (e.g. 'play') */\r\n            action: 'opening',\r\n            /** Useful for categorizing events (e.g. 'Fall Campaign') */\r\n            label: tooltipHeader || \"Unknown tooltip\"\r\n            /** A numeric value associated with the event (e.g. 42) */\r\n          })\r\n        }}\r\n        //fix for janky popup positioning due to overflow styling\r\n        popperModifiers={{ preventOverflow: { boundariesElement: \"window\" } }}\r\n        trigger={\r\n          <FontAwesomeIcon\r\n            icon={faInfoCircle}\r\n            color={color}\r\n            size={size} />}>\r\n        {tooltipHeader && (\r\n\r\n          <Popup.Header className=\"flex left\">{tooltipHeader}</Popup.Header>\r\n        )}\r\n        <Popup.Content className=\"flex left\">{tooltip}</Popup.Content>\r\n      </Popup>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { Dropdown } from 'semantic-ui-react';\r\nimport { AppContext } from \"../../../context\";\r\nimport { FilterType } from '../../../types';\r\nimport { sendAnalyticsEvent } from \"../../../utils/analyticsUtils\";\r\nimport { getCountryName } from \"../../../utils/mapUtils\";\r\nimport { toPascalCase } from \"../../../utils/translate/caseChanger\";\r\nimport Translate from \"../../../utils/translate/translateService\";\r\nimport InformationIcon from \"../../shared/InformationIcon\";\r\n\r\nexport default function Filters() {\r\n  const [state, dispatch] = useContext(AppContext);\r\n\r\n  const formatOptions = (options: any, filter_type: FilterType) => {\r\n    const formatted_options: Record<string, string>[] = [];\r\n    const optionString = toPascalCase(filter_type.toString());\r\n    const jsonObjectString = `${optionString}Options`;\r\n    switch (filter_type) {\r\n      case 'country':\r\n        options.forEach((o: string) => {\r\n          formatted_options.push({\r\n            key: o,\r\n            text: getCountryName(o, state.language, jsonObjectString),\r\n            value: o\r\n          })\r\n        });\r\n        break;\r\n      default:\r\n        options.forEach((o: string) => {\r\n          const translatedString = Translate(jsonObjectString, [toPascalCase(o)]);\r\n          const alternativeString = Translate(jsonObjectString, [o.replace(/ /g, '')]);\r\n          let text = !alternativeString && !translatedString ? o + \"*\" : (translatedString ? translatedString : alternativeString);\r\n          formatted_options.push({\r\n            key: o,\r\n            text: text,\r\n            value: o\r\n          })\r\n        });\r\n    };\r\n    return formatted_options;\r\n  }\r\n\r\n  const addFilter = (data: any, filter_type: string) => {\r\n    dispatch({\r\n      type: 'UPDATE_FILTER',\r\n      payload: {\r\n        filter_type,\r\n        filter_value: data.value\r\n      }\r\n    });\r\n  }\r\n\r\n  const buildSectionHeader = (header_text: string, tooltip_text?: string | React.ReactNode, tooltip_header?: string) => {\r\n    return (\r\n      <div className=\"pb-2 flex\">\r\n        <div className=\"filter-section-header\">{header_text}</div>\r\n        {tooltip_text && (\r\n          <div className=\"tooltip-vert-adj\">\r\n            <InformationIcon\r\n              offset={10}\r\n              position=\"bottom right\"\r\n              color=\"#455a64\"\r\n              tooltipHeader={tooltip_header ? tooltip_header : header_text}\r\n              popupSize=\"small\"\r\n              size=\"sm\"\r\n              tooltip={tooltip_text} />\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const buildFilterDropdown = (filter_type: FilterType, placeholder: string) => {\r\n    return (\r\n      <div className=\"pb-3\">\r\n        <Dropdown\r\n          text={placeholder}\r\n          fluid\r\n          multiple\r\n          search\r\n          clearable\r\n          selection\r\n          options={formatOptions(state.filter_options[filter_type], filter_type)}\r\n          onChange={(e: any, data: any) => {\r\n            addFilter(data, filter_type)\r\n            sendAnalyticsEvent({\r\n              /** Typically the object that was interacted with (e.g. 'Video') */\r\n              category: 'Filter',\r\n              /** The type of interaction (e.g. 'play') */\r\n              action: 'selection',\r\n              /** Useful for categorizing events (e.g. 'Fall Campaign') */\r\n              label: `${filter_type.toString()} - ${data.value}`\r\n              /** A numeric value associated with the event (e.g. 42) */\r\n            })\r\n          }}\r\n          defaultValue={Array.from(state.filters[filter_type])}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"col-12 p-0\">\r\n      <div className=\"py-3 center flex\">\r\n        <div className=\"section-title\">\r\n          {Translate(\"Filter\").toUpperCase()}\r\n        </div>\r\n        <div className=\"tooltip-vert-adj\">\r\n          <InformationIcon\r\n            offset={10}\r\n            position=\"bottom right\"\r\n            color=\"#455a64\"\r\n            tooltipHeader={Translate(\"Filter\")}\r\n            popupSize=\"small\"\r\n            size=\"sm\"\r\n            tooltip={Translate('FilterTooltip')} />\r\n        </div>\r\n      </div>\r\n      <div className=\"row justify-content-center\">\r\n        <div className=\"col-10 col align-items-center p-0\">\r\n          <div className=\"pb-1\">\r\n            <div>\r\n              {buildSectionHeader(Translate('Geography'), Translate('GeographyTooltip'))}\r\n            </div>\r\n            <div>\r\n              {buildFilterDropdown('country', Translate('Country'))}\r\n            </div>\r\n            <div>\r\n              {buildFilterDropdown('estimate_grade', Translate('EstimateGrade'))}\r\n            </div>\r\n          </div>\r\n          <div className=\"pb-1\">\r\n            <div>\r\n              {\r\n                buildSectionHeader(Translate('StudyInformation'),\r\n                  <div>\r\n                    <p>\r\n                      {Translate('StudyInformationTooltip', ['FirstParagraph'])}\r\n                    </p>\r\n                    <p>\r\n\r\n                      {Translate('StudyInformationTooltip', ['SecondParagraph'])}\r\n                    </p>\r\n                  </div>)\r\n              }\r\n            </div>\r\n            <div>\r\n              {buildFilterDropdown('source_type', Translate('SourceType'))}\r\n            </div>\r\n            <div>\r\n              {buildFilterDropdown('study_status', Translate('StudyStatus'))}\r\n            </div>\r\n            <div>\r\n              {buildFilterDropdown('risk_of_bias', Translate('OverallRiskOfBias'))}\r\n            </div>\r\n          </div>\r\n          <div className=\"pb-1\">\r\n            <div>\r\n              {buildSectionHeader(Translate('Demographics'), Translate('DemographicsTooltip'))}\r\n            </div>\r\n            <div>\r\n              {buildFilterDropdown('population_group', Translate('PopulationGroup'))}\r\n            </div>\r\n            <div>\r\n              {buildFilterDropdown('sex', Translate('Sex'))}\r\n            </div>\r\n            <div>\r\n              {buildFilterDropdown('age', Translate('Age'))}\r\n            </div>\r\n          </div>\r\n          <div className=\"pb-1\">\r\n            <div>\r\n              {buildSectionHeader(Translate('TestInformation'), Translate('TestInformationTooltip'))}\r\n            </div>\r\n            <div>\r\n              {buildFilterDropdown('test_type', Translate('TestType'))}\r\n            </div>\r\n            <div>\r\n              {buildFilterDropdown('isotypes_reported', Translate('IsotypesReported'))}\r\n            </div>\r\n            <div>\r\n              {buildFilterDropdown('specimen_type', Translate('SpecimenType'))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { AppContext } from \"../../../context\";\r\nimport httpClient from \"../../../httpClient\";\r\nimport Translate from \"../../../utils/translate/translateService\";\r\nimport './TotalStats.css';\r\n\r\n\r\nexport default function TotalStats() {\r\n  const [state] = useContext(AppContext);\r\n  const [countries, setNumCountries] = useState(0);\r\n  const [numStudies, setNumStudies] = useState(0);\r\n  const [seroprevalence, setSeroprevalence] = useState<any>(null);\r\n  const [n, setN] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if(state.filtered_records.length > 0){\r\n      const updateCountryPrevalence = async () => {\r\n        const api = new httpClient();\r\n        const results = await api.postMetaAnalysisAll(state.filtered_records);\r\n        setNumCountries(results.countries);\r\n        setSeroprevalence(results.seroprevalence);\r\n        setN(results.n);\r\n      } \r\n      setNumStudies(state.filtered_records.length);\r\n      updateCountryPrevalence();\r\n    }\r\n  }, [state.filtered_records])\r\n\r\n  return (\r\n    <div className=\"col-12 p-0 stats-container\">\r\n      <div className=\"col-12 pb-2 pt-4 section-title center\">{Translate('SummaryStatistics').toUpperCase()}</div>\r\n      {/* <div className=\"col-12 p-0 flex\">\r\n        <div className=\"main-statistic-title col-12 p-0 center-item flex\">\r\n          {Translate('Seroprevalence')}\r\n          <InformationIcon\r\n            color=\"#468ac1\"\r\n            offset={-12}\r\n            tooltip={\r\n              <div>\r\n                <p>\r\n                  {Translate(\"SeroprevalenceTooltip\", ['FirstParagraph'])}\r\n                </p>\r\n                <p>\r\n                  {Translate(\"SeroprevalenceTooltip\", ['SecondParagraph'])}\r\n                </p>\r\n                <p>\r\n                  {Translate(\"SeroprevalenceTooltip\", ['ThirdParagraph'], { \"MIN_DENOMINATOR\": MIN_DENOMINATOR })}\r\n                </p>\r\n              </div>\r\n            }\r\n            size=\"xs\"\r\n            tooltipHeader={Translate(\"AggregatedPrevalence\")} /></div>\r\n        <div className=\"main-statistic col-12 p-0 center\">{seroprevalence ? `${seroprevalence!.toFixed(2)}%` : Translate(\"NoData\")}</div>\r\n      </div> */}\r\n      <div className=\"col-12 flex middle pb-2\">\r\n        <div className=\"secondary-statistic-title center p-0 col-12\">{Translate(\"TestsAdministered\")}</div>\r\n        <div className=\"secondary-statistic col-12 p-0 center\">{n}</div>\r\n      </div>\r\n      <div className=\"col-12 flex middle py-2\">\r\n        <div className=\"secondary-statistic-title center p-0\">{Translate(\"NumSeroprevalenceEstimates\")}</div>\r\n        <div className=\"secondary-statistic px-1 center\">{numStudies}</div>\r\n      </div>\r\n      <div className=\"col-12 flex middle py-2\">\r\n        <div className=\"secondary-statistic-title px-1 center\">{Translate(\"CountriesIncluded\")}</div>\r\n        <div className=\"secondary-statistic px-1 center\">{countries}</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { Fragment } from \"react\"\r\n\r\ninterface HandleProps {\r\n  domain: number[];\r\n  handle: {\r\n    id: string;\r\n    value: number;\r\n    percent: number;\r\n  },\r\n  disabled: boolean;\r\n  getHandleProps: Function\r\n}\r\n\r\n\r\nexport function Handle({\r\n  domain: [min, max],\r\n  handle: { id, value, percent },\r\n  disabled,\r\n  getHandleProps,\r\n}: HandleProps) {\r\n  return (\r\n    <Fragment>\r\n      <div\r\n        className=\"handle\"\r\n        style={{\r\n          left: `${percent}%`,\r\n        }}\r\n        {...getHandleProps(id)}\r\n      />\r\n      <div\r\n        role=\"slider\"\r\n        aria-valuemin={min}\r\n        aria-valuemax={max}\r\n        className=\"handle-slider\"\r\n        aria-valuenow={value}\r\n        style={{\r\n          left: `${percent}%`,\r\n        }}\r\n      />\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport function KeyboardHandle({\r\n  domain: [min, max],\r\n  handle: { id, value, percent },\r\n  disabled,\r\n  getHandleProps,\r\n}: HandleProps) {\r\n  return (\r\n    <button\r\n      role=\"slider\"\r\n      aria-valuemin={min}\r\n      aria-valuemax={max}\r\n      aria-valuenow={value}\r\n      style={{\r\n        left: `${percent}%`,\r\n        position: 'absolute',\r\n        transform: 'translate(-50%, -50%)',\r\n        zIndex: 2,\r\n        width: 24,\r\n        height: 24,\r\n        borderRadius: '50%',\r\n        boxShadow: '1px 1px 1px 1px rgba(0, 0, 0, 0.3)',\r\n        backgroundColor: disabled ? '#666' : '#ffc400',\r\n      }}\r\n      {...getHandleProps(id)}\r\n    />\r\n  )\r\n}","import { Fragment } from \"react\"\r\nimport React from 'react'\r\n\r\ninterface SliderRailProps {\r\n  getRailProps: Function\r\n}\r\n\r\nexport function SliderRail({ getRailProps }: SliderRailProps) {\r\n  return (\r\n    <Fragment>\r\n      <div className=\"outer-rail\" {...getRailProps()} />\r\n      <div className=\"inner-slider-rail\" />\r\n    </Fragment>\r\n  )\r\n}","import React from \"react\"\r\nimport { SliderItem } from \"react-compound-slider\"\r\n\r\ninterface TickProps {\r\n  tick: SliderItem,\r\n  count: number,\r\n  label: string\r\n}\r\n\r\nexport function Tick({ tick, count, label }: TickProps) {\r\n  return (\r\n    <div>\r\n      <div className=\"tick-container\" style={{ left: `${tick.percent}%` }} />\r\n      <div className=\"tick\"\r\n        style={{\r\n          marginLeft: `${-(100 / count) / 2}%`,\r\n          width: `${100 / count}%`,\r\n          left: `${tick.percent}%`,\r\n        }}\r\n      >\r\n        {label}\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from \"react\"\r\nimport { SliderItem } from \"react-compound-slider\"\r\n\r\ninterface TrackProps {\r\n  source: SliderItem,\r\n  target: SliderItem,\r\n  disabled: boolean,\r\n  getTrackProps: Function\r\n}\r\n\r\nexport function Track({ source, target, getTrackProps, disabled }: TrackProps) {\r\n\r\n  const getPosition = () => {\r\n    const left = `${source.percent}%`;\r\n    const width = `${target.percent - source.percent}%`\r\n\r\n    return {\r\n      left, width\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"track\"\r\n      style={getPosition()}\r\n      {...getTrackProps()}\r\n    />\r\n  )\r\n}\r\n\r\nTrack.defaultProps = {\r\n  disabled: false,\r\n}","import _ from 'lodash'\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { Handles, Rail, Slider, SliderItem, Ticks, Tracks } from 'react-compound-slider'\r\nimport { AppContext } from '../../../../context'\r\nimport Translate from '../../../../utils/translate/translateService'\r\nimport { Handle } from './Handle'\r\nimport { SliderRail } from './SliderRail'\r\nimport './Styles.scss'\r\nimport { Tick } from './Tick'\r\nimport { Track } from './Track'\r\nimport { LanguageType } from '../../../../types'\r\n\r\ninterface TickItem {\r\n  tick: SliderItem,\r\n  label: string,\r\n  count: number\r\n}\r\n\r\nexport default function DateRangeSlider() {\r\n  const [state, dispatch] = useContext(AppContext);\r\n  const endMoment = new Date().getTime();\r\n\r\n  const [displayStartDate, setStartDate] = useState(endMoment - 2);\r\n  const [displayEndDate, setEndDate] = useState(endMoment);\r\n  // The end moment should technically be after the start moment\r\n  const [startBound, setStartBound] = useState(endMoment - 1);\r\n  const [endBound,] = useState(endMoment);\r\n\r\n  useEffect(() => {\r\n\r\n    if(state.airtable_records) {\r\n    const orderedDates = state.airtable_records\r\n      .filter(o => o.publish_date !== null && o.publish_date !== undefined)\r\n      .map(o => o.publish_date instanceof Array ? Date.parse(o.publish_date[0] as string) : Date.parse(o.publish_date as string))\r\n      .sort((a, b) => a - b);\r\n\r\n    const startDate = orderedDates[0];\r\n    setStartBound(startDate);\r\n    setStartDate(startDate);\r\n  }\r\n\r\n  }, [state.airtable_records])\r\n\r\n  const getTimeRange = (start: Date, end: number) => {\r\n    const startTime = start.getTime();\r\n    const timeElapsed = end - startTime;\r\n    const yearsElapsed = timeElapsed / (1000 * 3600 * 24 * 365)\r\n    const monthsElapsed = yearsElapsed * 12;\r\n    const startMonth = start.getMonth();\r\n    const months = _.range(startMonth, startMonth + monthsElapsed);\r\n    return months.map(month => {\r\n      const year = start.getFullYear() + Math.floor(month / 12)\r\n      const date = new Date(year, month);\r\n      const percentage = (date.getTime() - startTime) / timeElapsed * 100;\r\n      return { percentage, date }\r\n    }).filter(o => o.percentage > 0)\r\n  }\r\n\r\n  const createTicks = (startDate: number, endDate: number) => {\r\n    const start = new Date(startDate);\r\n    const monthRange = getTimeRange(start, endDate);\r\n    const totalCount = monthRange.length + 1;\r\n    const formatOptions = {\r\n      month: 'short'\r\n    }\r\n    const todayTick: TickItem = {\r\n      tick: {\r\n        id: endDate.toString(),\r\n        value: endDate,\r\n        percent: 100\r\n      },\r\n      count: totalCount,\r\n      label: Translate(\"Today\")\r\n    }\r\n\r\n    const localeDate = state.language === LanguageType.english ? \"en-US\" : \"fr-FR\";\r\n\r\n    const monthTicks: TickItem[] = monthRange.map(o => ({\r\n      tick: {\r\n        id: o.date.toString(),\r\n        value: o.date.getTime(),\r\n        percent: o.percentage\r\n      },\r\n      label: o.date.toLocaleDateString(localeDate, formatOptions),\r\n      count: totalCount\r\n    }))\r\n\r\n    return [...monthTicks, todayTick]\r\n  }\r\n\r\n\r\n  const onChange = async (values: readonly number[]) => {\r\n\r\n    if (values[0] === values[1]) {\r\n      return null;\r\n    }\r\n    setStartDate(values[0]);\r\n    setEndDate(values[1]);\r\n    dispatch({\r\n      type: 'UPDATE_FILTER',\r\n      payload: {\r\n        filter_type: 'publish_date',\r\n        filter_value: values\r\n      }\r\n    })\r\n  }\r\n\r\n  if (startBound === undefined || endBound === undefined) {\r\n    return null;\r\n  }\r\n\r\n  const customTicks = createTicks(startBound, endBound);\r\n  return (\r\n    <div className=\"slider-container\">\r\n      <div className=\"section-title space-between flex\">\r\n        {Translate('DateRange')}\r\n        <div className=\"dates\">\r\n          {new Date(displayStartDate).toLocaleDateString(\"en-US\")} - {new Date(displayEndDate).toLocaleDateString(\"en-US\")}\r\n        </div>\r\n\r\n      </div>\r\n      <Slider\r\n        mode={2}\r\n        step={1000 * 3600 * 24}\r\n        domain={[startBound, endBound]}\r\n        className=\"slider\"\r\n        onChange={onChange}\r\n        values={[displayStartDate, displayEndDate]}\r\n      >\r\n        <Rail>\r\n          {({ getRailProps }) => <SliderRail getRailProps={getRailProps} />}\r\n        </Rail>\r\n        <Handles>\r\n          {({ handles, getHandleProps }) => (\r\n            <div className=\"slider-handles\">\r\n              {handles.map(handle => (\r\n                <Handle\r\n                  key={handle.id}\r\n                  handle={handle}\r\n                  domain={[displayStartDate, displayEndDate]}\r\n                  disabled={false}\r\n                  getHandleProps={getHandleProps}\r\n                />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </Handles>\r\n        <Tracks left={false} right={false}>\r\n          {({ tracks, getTrackProps }) => (\r\n            <div className=\"slider-tracks\">\r\n              {tracks.map(({ id, source, target }) => (\r\n                <Track\r\n                  key={id}\r\n                  source={source}\r\n                  target={target}\r\n                  getTrackProps={getTrackProps}\r\n                />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </Tracks>\r\n        <Ticks>\r\n          {({ ticks }) => (\r\n            <div className=\"slider-ticks\">\r\n              {customTicks.map(tickItem => (\r\n                <Tick key={tickItem.tick.id}\r\n                  tick={tickItem.tick}\r\n                  count={tickItem.count}\r\n                  label={tickItem.label} />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </Ticks>\r\n      </Slider>\r\n    </div>\r\n  )\r\n}","import React, { useContext } from \"react\";\r\nimport { AppContext } from \"../../../context\";\r\nimport InformationIcon from \"../../shared/InformationIcon\";\r\nimport './RightSidebar.css';\r\nimport Translate from \"../../../utils/translate/translateService\";\r\n\r\nexport default function LastUpdated() {\r\n  const [state] = useContext(AppContext);\r\n\r\n  return (\r\n    <div className=\"col-12 pb-2\">\r\n      <div className='col-12 p-0 center-item flex'>\r\n        <div className=\"section-title center last-refreshed-title\">\r\n        {Translate(\"DatabaseUptoDateTo\").toUpperCase()}\r\n        </div>\r\n      </div>\r\n      <div className=\"py-2 center\">\r\n        {state.updated_at}\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from \"react\";\nimport { Popup } from \"semantic-ui-react\";\nimport { sendAnalyticsEvent } from \"../../utils/analyticsUtils\";\nimport './shared.scss';\n\ninterface InformationTextProps {\n  position?: \"top left\" | \"top right\" | \"bottom right\" | \"bottom left\" | \"right center\" | \"left center\" | \"top center\" | \"bottom center\" | undefined,\n  tooltip: string | React.ReactNode;\n  tooltipHeader?: string;\n  offset: string | number;\n  popupSize?: \"mini\" | \"tiny\" | \"small\" | \"large\" | \"huge\";\n  text: string;\n}\n\nexport default function InformationText(props: InformationTextProps) {\n  const { text, tooltip, tooltipHeader, offset, position, popupSize = \"small\" } = props;\n  return (\n      <Popup\n        key={Math.random()}\n        offset={offset}\n        position={position}\n        size={popupSize}\n        onOpen={() => {\n          sendAnalyticsEvent({\n            /** Typically the object that was interacted with (e.g. 'Video') */\n            category: 'Tooltip',\n            /** The type of interaction (e.g. 'play') */\n            action: 'opening',\n            /** Useful for categorizing events (e.g. 'Fall Campaign') */\n            label: tooltipHeader || \"Unknown tooltip\"\n            /** A numeric value associated with the event (e.g. 42) */\n          })\n        }}\n        //fix for janky popup positioning due to overflow styling\n        popperModifiers={{ preventOverflow: { boundariesElement: \"window\" } }}\n        trigger={<span className=\"info-text\">{text}</span>}>\n        {tooltipHeader && (\n\n          <Popup.Header className=\"flex left\">{tooltipHeader}</Popup.Header>\n        )}\n        <Popup.Content className=\"flex left\">{tooltip}</Popup.Content>\n      </Popup>\n  );\n}","import React from \"react\";\nimport { MIN_DENOMINATOR } from \"../../../metaAnalysis\";\nimport InformationText from \"../../shared/InformationText\";\nimport './AnalysisMethods.css';\n\n\nexport default function AnalysisMethods() {\n  return (\n    <div className=\"analysis-methods\">\n        <div className=\"section-title py-2 center\">\n            ANALYSIS METHODS\n        </div>\n        <p>\n            <div>\n                {'The seroprevalence shown for each country or factor is calculated by '}\n                    <InformationText \n                        tooltip={\n                            <div>\n                            <p>\n                                The aggregation technique used is fixed-effects, inverse-variance-weighted meta-analysis of prevalence, with the Freeman-Tukey double arcsin transform used to stabilize variance. Records over sample size {MIN_DENOMINATOR} considered.\n                            </p>\n                        </div>\n                        }\n                        text=\"aggregating\"\n                        offset={-12}\n                    /> \n                {' all seroprevalence estimates that match the filters you specify.'}\n            </div>\n        </p>\n        <p>\n            Default filters: national and regional estimates, in the general population and blood donors. \n        </p>\n        <p>\n            These aggregated estimates should be interpreted with caution, especially if the studies that were aggregated did not include representative samples or were at high risk of bias. \n        </p>\n    </div>\n  )\n}","import { AirtableRecord, AggregationFactor, AggregatedRecord, FilterType } from \"./types\"\n\nconst Z_SCORE: number = 1.96;\nexport const MIN_DENOMINATOR: number = 100;\n\nfunction transformPrevalence (p: number, N: number, method: string){\n    switch(method as any) {\n        case \"inverse_variance\": {\n            return p; \n        }\n        case \"logit\": {\n            return Math.log(p / (1 - p))\n        }\n        case \"arcsin\": {\n            return Math.asin(Math.sqrt(p))\n        }\n        case \"double_arcsin\": {\n            const n = N * p\n            return (Math.asin(Math.sqrt(n / (N + 1))) + Math.asin(Math.sqrt((n + 1) / (N + 1))) )\n        }\n        case \"double_arcsin_RSM\": {\n            const n = N * p\n            return 0.5 * (Math.asin(Math.sqrt(n / (N + 1))) + Math.asin(Math.sqrt((n + 1) / (N + 1))) )\n        }\n    }\n}\n\nfunction transformVariance(p: number, N: number, method: string){\n    switch(method as any){\n        case \"inverse_variance\": {\n            return p * (1 - p) / N; \n        }\n        case \"logit\": {\n            return 1 / (N * p) + 1 / (N * (1 - p));\n        }\n        case \"arcsin\": {\n            return 1 / (4 * N)\n        }\n        case \"double_arcsin\": {\n            return 1 / (N + 0.5)\n        }\n        case \"double_arcsin_RSM\": {\n            return 1 / (4 * N + 2)\n        }\n    }\n}\n\nfunction backTransform(t: number, n: number, method: string){\n    switch(method as any){\n        case \"inverse_variance\": {\n            return t;\n        }\n        case \"logit\": {\n            return Math.exp(t) / (Math.exp(t) + 1);\n        }\n        case \"arcsin\": {\n            return Math.sin(t) ** 2\n        }\n        case \"double_arcsin\": {\n            return Math.sin(t / 2) ** 2\n        }\n        case \"double_arcsin_RSM\": {\n            return 0.5 * (1 - Math.sign(Math.cos(t)) \n            * Math.sqrt(1 - (Math.sin(2 * t) + (Math.sin(2 * t) - 2 * Math.sin(2 * t)) / n) ** 2))\n        }\n    }\n}\n\nexport function aggregateRecords(records: AirtableRecord[], method: string = \"double_arcsin_RSM\") {\n    let total_positive = 0;\n    let total_tested = 0;\n\n    const filteredRecords = records.filter(record => ((record.seroprevalence !== null) && (record.denominator !== null && record.denominator >= MIN_DENOMINATOR)));\n    const n_studies = filteredRecords.length;\n\n    let pooled_p: number = 0;\n    let error: number[] = [0, 0];\n\n    if (method === \"naive_pooling\"){\n        filteredRecords.forEach((record: AirtableRecord) => {\n            total_positive += (record.seroprevalence as number) * (record.denominator as number);\n            total_tested += (record.denominator as number);\n        });\n\n        pooled_p = total_positive / total_tested;\n\n        const pooled_var = ((pooled_p) * (1 - pooled_p)) / total_tested;\n        error = [Z_SCORE * Math.sqrt(pooled_var), Z_SCORE * Math.sqrt(pooled_var)];\n    } else {\n        let var_sum = 0;\n        let inv_var_sum = 0;\n        let p_over_var_sum = 0;\n        let inv_n_sum = 0;\n        let prevalence = 0;\n        let variance = 0;\n\n        \n        filteredRecords.forEach((record: AirtableRecord) => {\n            if ((record.seroprevalence !== null) && (record.denominator !== null) && (record.seroprevalence !== 0) && (record.denominator !== 0)) {\n                prevalence = transformPrevalence(record.seroprevalence, record.denominator, method)!;\n                variance = transformVariance(record.seroprevalence, record.denominator, method)!;\n                var_sum = var_sum + variance;\n                inv_var_sum = inv_var_sum + (1 / variance);\n                p_over_var_sum = p_over_var_sum + (prevalence / variance);\n                total_tested = total_tested + record.denominator;\n                inv_n_sum = inv_n_sum + 1 / record.denominator;\n            }\n        });\n\n        pooled_p = p_over_var_sum / inv_var_sum;\n        const conf_inter = [pooled_p - Z_SCORE * Math.sqrt(var_sum), pooled_p + Z_SCORE * Math.sqrt(var_sum)]\n\n        const overall_n = 1 / (inv_n_sum / n_studies)\n\n        pooled_p = backTransform(pooled_p, overall_n, method)!; \n        error = [pooled_p - backTransform(conf_inter[0], overall_n, method)!, backTransform(conf_inter[1], overall_n, method)! - pooled_p];\n    }\n\n    if (pooled_p - error[0] < 0) {error[0] = pooled_p}\n    if (pooled_p + error[1] > 1) {error[1] = 1 - pooled_p}\n    \n    const aggregatedRecord: AggregatedRecord = {\n        seroprevalence: pooled_p * 100,\n        error: [error[0] * 100, error[1] * 100],\n        n: total_tested,\n        num_studies: n_studies,\n        name: \"\"\n    }\n    return aggregatedRecord\n}\n\n// Given an aggregation factor (either 'country' or 'populations')\n// get pooled seroprevalence, error bounds, and n (total number of tests) for each country or population\n// if must_include_in_n = true, only records tagged as \"include_in_n\" will be incorporated into seroprevalence estimates\nexport function getAggregateData(records: AirtableRecord[], aggregation_factor: AggregationFactor, must_include_in_n: boolean = false) {\n    const grouped_records: Record<string, AirtableRecord[]> = {}\n    const aggregationString: string = aggregation_factor.toString();\n    records.forEach((record: AirtableRecord) => {\n        const to_include = must_include_in_n ? record.include_in_n : true;\n        if(to_include){\n            const recordStrings = record[aggregationString as FilterType];\n            if ((record.seroprevalence !== null) && (record.denominator !== null) && (recordStrings != null)) {\n                const strings = recordStrings instanceof Array ? recordStrings : [recordStrings];\n                strings.forEach( group => groupRecords(grouped_records, record, group) )\n            }\n        }\n    });\n\n\n    const aggregate_data: AggregatedRecord[] = []\n\n    for (const name in grouped_records) {\n        const result = aggregateRecords(grouped_records[name]);\n        aggregate_data.push({ ...result, name });\n    }\n    return aggregate_data;\n}\n\nfunction groupRecords(grouped_records: Record<string, AirtableRecord[]>, record: AirtableRecord, group: string) {\n    if (group in grouped_records) {\n        grouped_records[group].push(record);\n    }\n    else {\n        grouped_records[group] = [record];\n    }\n}\n","import React from \"react\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport { mobileDeviceOrTabletWidth } from \"../../constants\";\r\nimport { colors } from \"../../utils/mapUtils\";\r\nimport \"./Legend.css\";\r\nimport Translate from \"../../utils/translate/translateService\";\r\n\r\ninterface LegendProps {\r\n  buckets: number[]\r\n}\r\n\r\nexport default function Legend(props: LegendProps) {\r\n  const { buckets } = props;\r\n  const isMobileDeviceOrTablet = useMediaQuery({ maxWidth: mobileDeviceOrTabletWidth })\r\n\r\n  // const labels = buckets.map((value, index) => {\r\n  //   if (index !== buckets.length) {\r\n  //     const from = value;\r\n  //     const to = buckets[index + 1]\r\n  //     // TODO: Check into passing in an array of colours instead of the getColor function\r\n  //     return (\r\n  //       <div className=\"bin flex\" key={Math.random()}>\r\n  //         <div className={isMobileDeviceOrTablet ? \"col-12 mobile-text p-0\" : \"col-12 p-0\"}>\r\n  //           {isMobileDeviceOrTablet ? `${from}%${to ? '' : \"+\"}` : `${from}%${to ? `- ${to}%` : \"+\"}`}</div>\r\n  //         <i className=\"col-12 p-0\" style={{ background: getColor(from, buckets) }}></i>\r\n  //       </div>\r\n  //     )\r\n  //   }\r\n  //   return null;\r\n  // })\r\n\r\n  return (\r\n    <div className={isMobileDeviceOrTablet ? \"info flex legend-mobile center-item\" : \"info flex legend center-item\"}>\r\n      <div className=\"flex center-item\" key={Math.random()}>\r\n        <i className=\"block\" style={{ background: colors[6] }}></i>\r\n        <p className={isMobileDeviceOrTablet ? \"mobile-text px-2\" : \"px-2\"}>{Translate(\"CountryEstimatesExist\")}</p>\r\n      </div>\r\n      {/* {labels} */}\r\n      {/* <h4 className=\"legend-title p-0 middle\">{Translate('Seroprevalence')}\r\n        <span className=\"popup\">\r\n          <div className=\"popup-header\">{Translate(\"SeroprevalenceScale\")}</div>\r\n          <div className=\"popup-content\">{Translate(\"SeroprevalenceScaleTooltip\")}</div>\r\n        </span>\r\n      </h4> */}\r\n    </div>\r\n  )\r\n}\r\n","import { latLngBounds } from \"leaflet\";\nimport React, { createRef, useContext, useEffect, useState } from \"react\";\nimport { GeoJSON, Map as LeafletMap, TileLayer } from \"react-leaflet\";\nimport Countries from \"../../assets/countries-geo.json\";\nimport { AppContext } from \"../../context\";\nimport { altStyle, getBuckets, getMapUrl, mapAltDataToFeatures, onAltEachFeature } from \"../../utils/mapUtils\";\nimport Legend from \"./Legend\";\nimport './Map.css';\n\nexport default function Map() {\n  const mapRef = createRef<LeafletMap>();\n  const geoJsonRef = createRef<GeoJSON>();\n  const [state] = useContext(AppContext);\n  const [mapRecords, setMapRecords] = useState(Countries as any);\n  const [forceUpdate, setForceUpdate] = useState(Math.random());\n  const buckets = getBuckets(mapRecords.features);\n\n  useEffect(() => {\n    if(state.estimate_grade_prevalences.length > 0){\n\n      const importGeo = Countries as any;\n      const features = importGeo.features as GeoJSON.Feature[]\n      // We will iterate through all the features in the geoJson\n      // if they are in the country dict we will attach their aggregated data to the feature for displaying\n      importGeo.features = mapAltDataToFeatures(features, state.estimate_grade_prevalences);\n      setMapRecords(importGeo)\n\n      // we need to update the key on the GEOJSON to let react know it's time to rerender\n      setForceUpdate(Math.random())\n    }\n    else{\n      // Initialize map so that it starts out colourless\n      const initImportGeo = Countries as any;\n      const features = initImportGeo.features as GeoJSON.Feature[]\n      initImportGeo.features = features.map(feature => {\n        return { ...feature, properties: { ...feature.properties, seroprevalence: null, error: null, n: null, num_studies: null } }\n      })\n      setMapRecords(initImportGeo);\n    }\n  }, [state.country_prevalences, state.estimate_grade_prevalences])\n\n  const bounds = latLngBounds([-90, -200], [90, 180]);\n  const maxBounds = latLngBounds([-90, -200], [90, 200]);\n\n  const mapboxAccessToken = process.env.REACT_APP_MAPBOX_API_KEY;\n  return (\n    <LeafletMap\n      ref={mapRef}\n      center={[0, 0]}\n      zoom={1}\n      className=\"map w-100\"\n      bounceAtZoomLimits={true}\n      bounds={bounds}\n      minZoom={2}\n      maxBounds={maxBounds}\n      enableHighAccuracy={true}\n      maxBoundsViscosity={1}\n    >\n      <TileLayer\n        url={getMapUrl(state.language) + mapboxAccessToken}\n        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        tileSize={512}\n        id={'mapbox/light-v9'}\n        zoomOffset={-1}>\n      </TileLayer>\n      <GeoJSON\n        onEachFeature={(feature, layer) => onAltEachFeature(feature, layer, mapRef, state.language)}\n        ref={geoJsonRef}\n        key={forceUpdate}\n        data={mapRecords as GeoJSON.GeoJsonObject}\n        style={(data) => altStyle(data, buckets)}>\n      </GeoJSON>\n      <Legend buckets={buckets} />\n    </LeafletMap>\n  );\n}\n","import React, { useState, useContext } from \"react\";\nimport { AppContext } from \"../../context\";\nimport { Sidebar, Segment, Menu } from \"semantic-ui-react\";\nimport Filters from \"../sidebar/right-sidebar/Filters\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes, faFilter, faBars } from \"@fortawesome/free-solid-svg-icons\";\nimport TotalStats from \"../sidebar/left-sidebar/TotalStats\";\nimport DateRangeSlider from \"../sidebar/right-sidebar/date-slider/Slider\";\nimport LastUpdated from \"../sidebar/right-sidebar/LastUpdated\";\nimport AnalysisMethods from \"../sidebar/left-sidebar/AnalysisMethods\";\nimport Charts from \"../charts/Charts\";\nimport Map from '../map/Map';\n\n\nexport default function ExploreMobile() {\n  const [showMobileFilters, setShowFilters] = useState(false);\n  const [showSummary, setShowSummary] = useState(false);\n\n  const handleFilterToggle = (showMobile: boolean, showSummary: boolean) => {\n    setShowFilters(showMobile);\n    setShowSummary(showSummary);\n  }\n\n  return (\n    <div className=\"fill flex\">\n      <Sidebar.Pushable as={Segment} className=\"fill flex\">\n        {/* Filters */}\n        <Sidebar\n          as={Menu}\n          animation='overlay'\n          icon='labeled'\n          className=\"col-10 p-0\"\n          vertical\n          direction=\"left\"\n          visible={showMobileFilters}\n          width='wide'\n        >\n\n          <Filters />\n          <DateRangeSlider />\n          <LastUpdated />\n          <FontAwesomeIcon\n            icon={faTimes}\n            onClick={() => handleFilterToggle(false, false)}\n            className={'icon'}\n            color={'#455a64'}\n            style={{ fontWeight: 300, position: 'absolute', zIndex: 3000, top: 10, right: 20 }}\n            size={\"lg\"} />\n        </Sidebar>\n        {/* Left Sidebar */}\n        <Sidebar\n          as={Menu}\n          animation='overlay'\n          icon='labeled'\n          className=\"col-10 p-0\"\n          vertical\n          direction=\"left\"\n          visible={showSummary}\n          width='wide'\n        >\n          <TotalStats />\n          <AnalysisMethods />\n          <FontAwesomeIcon\n            icon={faTimes}\n            onClick={() => handleFilterToggle(false, false)}\n            className={'icon'}\n            color={'#455a64'}\n            style={{ fontWeight: 300, position: 'absolute', zIndex: 3000, top: 10, right: 20 }}\n            size={\"lg\"} />\n        </Sidebar>\n        <Sidebar.Pusher className=\"fill flex\">\n          <Map />\n          {/* Icons */}\n          <div className=\"icon-container\"\n            style={{ top: 10, right: 15 }}>\n            <FontAwesomeIcon\n              icon={faFilter}\n              onClick={() => handleFilterToggle(!showMobileFilters, false)}\n              className={'icon'}\n              color={'#455a64'}\n              size={\"2x\"} />\n          </div>\n          <div className=\"icon-container\"\n            style={{ top: 10, right: 58 }}>\n            <FontAwesomeIcon\n              icon={faBars}\n              onClick={() => handleFilterToggle(false, !showSummary)}\n              className={'icon'}\n              color={'#455a64'}\n              size={\"2x\"} />\n          </div>\n        </Sidebar.Pusher>\n      </Sidebar.Pushable>\n    </div>\n  )\n}","import React from \"react\";\r\nimport \"../sidebar.css\";\r\nimport AnalysisMethods from \"./AnalysisMethods\";\r\nimport TotalStats from \"./TotalStats\";\r\nimport HealthAgencyLogo from '../../../assets/images/public-health-agency.png';\r\nimport UcalgaryLogo from '../../../assets/images/University-Of-Calgary-Logo.png';\r\n\r\nexport default function LeftSidebar() {\r\n  return (\r\n    <div className=\"sidebar-container flex\">\r\n      <TotalStats/>\r\n      <AnalysisMethods/>\r\n      <div className=\"m-3\">\r\n          <a href=\"https://www.covid19immunitytaskforce.ca/\" className=\"d-block mt-3 mx-auto\" target=\"__blank\" rel=\"noopener noreferrer\">\r\n              <img src=\"https://www.covid19immunitytaskforce.ca/wp-content/themes/pena-lite-child/CITF_logo_ENG.svg\" className=\"d-block mx-auto\" alt=\"COVID-19 Immunity Task Force Logo\" height=\"25\"></img>\r\n          </a>\r\n          <a href=\"https://www.canada.ca/en/public-health.html/\" className=\"d-block mt-3 mx-auto\" target=\"__blank\" rel=\"noopener noreferrer\">\r\n              <img src={HealthAgencyLogo} className=\"d-block mx-auto\" alt=\"Public Health Agency Logo\" height=\"25\"></img>\r\n          </a>\r\n          <a href=\"https://cumming.ucalgary.ca/centres/centre-health-informatics\" className=\"d-block mt-3 mx-auto\" target=\"__blank\" rel=\"noopener noreferrer\">\r\n              <img src={UcalgaryLogo} className=\"d-block mx-auto\" alt=\"Centre for Health Informatics\" height=\"22\"></img>\r\n          </a>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from \"react\";\r\nimport Filters from \"./Filters\";\r\nimport LastUpdated from \"./LastUpdated\";\r\nimport Slider from './date-slider/Slider';\r\nimport \"../sidebar.css\"\r\nimport \"./RightSidebar.css\"\r\nimport Translate from \"../../../utils/translate/translateService\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function RightSidebar() {\r\n  return (\r\n    <div className=\"justify-content-between sidebar-container\">\r\n      <div className=\"filters-container mb-3\">\r\n        <Filters />\r\n        <Slider />\r\n      </div>\r\n      <div className=\"fill\">\r\n        <LastUpdated />\r\n        <div className=\"fill center-item flex\">\r\n          <Link className=\"p-1\" to=\"/PrivacyPolicy\">{Translate('PrivacyPolicy')}</Link>\r\n          <Link className=\"p-1\" to=\"/CookiePolicy\">{Translate('CookiePolicy')}</Link>\r\n          <Link className=\"p-1\" to=\"/TermsOfUse\">{Translate('TermsOfUse')}</Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, { useContext, useEffect } from \"react\";\nimport { useMediaQuery } from \"react-responsive\";\nimport { mobileDeviceOrTabletWidth } from \"../../../constants\";\nimport { AppContext } from \"../../../context\";\nimport httpClient from \"../../../httpClient\";\nimport MobileComponents from '../../mobile/ExploreMobile';\nimport LeftSidebar from \"../../sidebar/left-sidebar/LeftSidebar\";\nimport RightSidebar from \"../../sidebar/right-sidebar/RightSidebar\";\nimport Map from '../../map/Map';\n\nexport default function Explore() {\n  const isMobileDeviceOrTablet = useMediaQuery({ maxDeviceWidth: mobileDeviceOrTabletWidth });\n  const [state, dispatch] = useContext(AppContext);\n  \n  useEffect(() => {\n    if(state.filtered_records.length > 0){\n      const updateCountryPrevalence = async () => {\n        const api = new httpClient();\n        const estimateGradePrevalences = await api.getEstimateGrades(state.filtered_records);\n        dispatch({\n          type: 'UPDATE_ESTIMATE_PREVALENCES',\n          payload: estimateGradePrevalences\n        });\n      } \n      updateCountryPrevalence();\n    }\n  }, [state.filtered_records, dispatch])\n\n  return (\n    <div className=\"fill flex dashboard\">\n      {!isMobileDeviceOrTablet ?\n        (<div className=\"fill flex\">\n          <div className=\"col-2 p-0 flex\">\n            <LeftSidebar />\n          </div>\n          <div className=\"col-8 p-0 flex\">\n            <Map />\n          </div>\n          <div className=\"col-2 p-0 flex\">\n            <RightSidebar />\n          </div>\n        </div>) :\n        (\n          <div className=\"fill flex\">\n            <MobileComponents />\n          </div>\n        )}\n    </div >\n  )\n}","import { faTimes } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useState } from \"react\";\r\nimport { Button, Modal } from \"semantic-ui-react\";\r\nimport { AirtableRecord } from \"../../types\";\r\nimport Translate from \"../../utils/translate/translateService\";\r\nimport \"./StudyDetailsModal.css\";\r\nimport { sendAnalyticsEvent } from \"../../utils/analyticsUtils\";\r\n\r\n// TODO: Extract this into a modal service \r\n\r\ninterface StudyDetailsModalProps {\r\n  record: AirtableRecord\r\n}\r\nexport default function StudyDetailsModal(props: StudyDetailsModalProps) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const inlineStyle = {\r\n    modal: {\r\n      marginTop: '0px !important',\r\n      marginLeft: 'auto',\r\n      marginRight: 'auto',\r\n      top: 'auto',\r\n      left: 'auto',\r\n      height: 'auto'\r\n    }\r\n  };\r\n\r\n  const getPossibleNullString = (nullString: string | number | null | undefined) => {\r\n    if (nullString === null || nullString === undefined) {\r\n      return \"Not Reported\"\r\n    }\r\n    return nullString\r\n  }\r\n\r\n  const getPossibleNullStringArray = (nullString: string[] | null | undefined) => {\r\n    if (nullString === null || nullString === undefined) {\r\n      return \"Not Reported\"\r\n    }\r\n    return nullString.join(\", \")\r\n  }\r\n\r\n  const getAuthorString = (first_author: string | undefined | null, lead_org: string | null | undefined) => {\r\n    if (lead_org && first_author) {\r\n      return Translate('StudyDetailsAuthorString', ['LeadOrg'], { 'FIRST_AUTHOR': first_author, 'LEAD_ORG': lead_org })\r\n    }\r\n    else if (first_author) {\r\n      return Translate('StudyDetailsAuthorString', ['NoLeadOrg'], { 'FIRST_AUTHOR': first_author })\r\n    }\r\n    return Translate('AuthorAndLeadOrganizationNotReported')\r\n  }\r\n\r\n  const getPublishString = (publish_date: string | string[] | undefined | null, publisher: string | null | undefined) => {\r\n    const date = publish_date instanceof Array ? publish_date[0] : publish_date;\r\n    if (date && publisher) {\r\n      return Translate('StudyDetailsPublishString', ['PublisherAndDate'], { 'PUBLISH_DATE': date, 'PUBLISHER': publisher })\r\n    }\r\n    else if (date) {\r\n      return Translate('StudyDetailsPublishString', ['NoPublisher'], { 'PUBLISH_DATE': date })\r\n    }\r\n    else if (publisher) {\r\n      return Translate('StudyDetailsPublishString', ['NoPublishDate'], { 'PUBLISHER': publisher })\r\n    }\r\n    return null\r\n  }\r\n\r\n  const {\r\n    source_name, first_author, lead_org, publish_date, publisher, url,\r\n    summary, study_status, study_type,\r\n    population_group, age, city, state, country, sex,\r\n    seroprevalence, risk_of_bias, denominator,\r\n    sampling_method, sampling_end_date, sampling_start_date,\r\n    test_type, sensitivity, specificity, isotypes_reported, manufacturer, approving_regulator\r\n  } = props.record\r\n  return (\r\n    <Modal\r\n      centered={true}\r\n      size=\"large\"\r\n      closeOnEscape={true}\r\n      closeOnDimmerClick={true}\r\n      onClose={() => { setOpen(false) }}\r\n      onOpen={() => {\r\n        sendAnalyticsEvent({\r\n          category: 'Study Details Modal',\r\n          action: 'opening',\r\n          label: props.record.source_name || \"Unknown\"\r\n        })\r\n      }}\r\n      open={open}\r\n      style={inlineStyle.modal}\r\n      trigger={\r\n        <Button onClick={() => setOpen(true)} style={{ padding: '8px' }}>\r\n          {Translate('Details')}\r\n        </Button>}>\r\n      <Modal.Header>{Translate('PrevalenceEstimateDetails')}\r\n        <FontAwesomeIcon onClick={() => setOpen(false)} icon={faTimes} size={\"sm\"} className=\"float-right cursor\" />\r\n      </Modal.Header>\r\n      <Modal.Content>\r\n        <Modal.Description>\r\n          <div className=\"col-12 p-0 flex\">\r\n            <div className=\"col-12 px-0 py-1\">\r\n              <div className=\"col-12 p-0 section-title\">{Translate('Source').toUpperCase()}</div>\r\n              <div className=\"col-12 px-2 py-1 section-container modal-text-container\">\r\n                <a href={url || \"\"} target=\"_blank\" rel=\"noopener noreferrer\" className=\"col-12 p-0 name-text\">\r\n                  {source_name}\r\n                </a>\r\n                <div className=\"col-12 p-0 secondary-text\">\r\n                  {getAuthorString(first_author, lead_org)}\r\n                </div>\r\n                <div className=\"col-12 p-0 tertiary-text\">\r\n                  {getPublishString(publish_date, publisher)}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-12 px-0 py-1\">\r\n              <div className=\"col-12 p-0 section-title\">{Translate('Study').toUpperCase()}</div>\r\n              <div className=\"col-12 px-2 py-1 flex section-container modal-text-container\">\r\n                <div className=\"col-12 p-0 secondary-text\">\r\n                  <div>\r\n                    <span className=\"secondary-title\">{Translate('Summary')}: </span>\r\n                    {getPossibleNullString(summary)}\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-6 p-0 secondary-text\">\r\n                  <div>\r\n                    <span className=\"secondary-title\">{Translate('Status')}: </span>{getPossibleNullString(study_status)}\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-6 p-0 secondary-text\">\r\n                  <div>\r\n                    <span className=\"secondary-title\">{Translate('StudyType')}: </span>{getPossibleNullString(study_type)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-12 px-0 py-1\">\r\n              <div className=\"col-12 p-0 section-title\">{Translate('Demographics').toUpperCase()}</div>\r\n              <div className=\"col-12 px-2 py-1 flex section-container modal-text-container\">\r\n                <div className=\"col-6 p-0 secondary-text\">\r\n                  <span className=\"secondary-title\">{Translate('Population')}: </span>{getPossibleNullStringArray(population_group)}\r\n                </div>\r\n                <div className=\"col-6 p-0 secondary-text\">\r\n                  <span className=\"secondary-title\">{Translate('AgeGroup')}: </span>{getPossibleNullStringArray(age)}\r\n                </div>\r\n                <div className=\"col-6 p-0 secondary-text\">\r\n                  <span>\r\n                    <span className=\"secondary-title\">{Translate('Location')}: </span>{city ? `${city.join(\", \")}, ` : \"\"}{state ? `${state.join(\", \")}, ` : \"\"}{country ? country : \"\"}\r\n                  </span>\r\n                </div>\r\n                <div className=\"col-6 p-0 secondary-text\">\r\n                  <span className=\"secondary-title\">{Translate('Sex')}: </span>{getPossibleNullString(sex)}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-6 pl-0 pr-2 py-1\">\r\n              <div className=\"col-12 p-0 section-title\">{Translate('Prevalence').toUpperCase()}</div>\r\n              <div className=\"col-12 px-2 py-1 flex section-container modal-text-container\">\r\n                <div className=\"col-12 p-0 secondary-text\">\r\n                  <span className=\"secondary-title\">{Translate('Estimate')}: </span>{seroprevalence ? (seroprevalence * 100).toFixed(2) : \"Not Reported\"}%\r\n                </div>\r\n                <div className=\"col-12 p-0 secondary-text\">\r\n                  <span className=\"secondary-title\">{Translate('StudySize')}: </span>{getPossibleNullString(denominator)}\r\n                </div>\r\n                <div className=\"col-12 p-0 secondary-text\">\r\n                  <span className=\"secondary-title\">{Translate('RiskOfBias')}: </span>{getPossibleNullString(risk_of_bias)}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-6 pl-2 pr-0 py-1\">\r\n              <div className=\"col-12 p-0 section-title\">{Translate('Sampling').toUpperCase()}</div>\r\n              <div className=\"col-12 px-2 py-1 flex section-container modal-text-container\">\r\n                <div className=\"col-12 p-0 secondary-text\">\r\n                  <div>\r\n                    <span className=\"secondary-title\">{Translate('SamplingMethod')}: </span>{getPossibleNullString(sampling_method)}\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-12 p-0 secondary-text\">\r\n                  <div>\r\n                    <span className=\"secondary-title\">{Translate('StartDate')}: </span>{getPossibleNullString(sampling_start_date)}\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-12 p-0 secondary-text\">\r\n                  <div>\r\n                    <span className=\"secondary-title\">{Translate('EndDate')}: </span>{getPossibleNullString(sampling_end_date)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-12 px-0 py-1\">\r\n              <div className=\"col-12 p-0 section-title\">{Translate('TestDetails').toUpperCase()}</div>\r\n              <div className=\"col-12 px-2 py-1 flex section-container modal-text-container\">\r\n                <div className=\"col-6 p-0\">\r\n                  <div className=\"col-12 p-0 secondary-text\">\r\n                    <div>\r\n                      <span className=\"secondary-title\">{Translate('Manufacturer')}: </span>{getPossibleNullString(manufacturer)}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-12 p-0 secondary-text\">\r\n                    <div>\r\n                      <span className=\"secondary-title\">{Translate('TestUsed')}: </span>{getPossibleNullStringArray(test_type)}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-12 p-0 secondary-text\">\r\n                    <div>\r\n                      <span className=\"secondary-title\">{Translate('Isotypes')}: </span>{getPossibleNullStringArray(isotypes_reported)}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-6 p-0\">\r\n                  <div className=\"col-12 p-0 secondary-text\">\r\n                    <div>\r\n                      <span className=\"secondary-title\">{Translate('Specificity')}: </span>{specificity ? `${(specificity * 100).toFixed(2)}%` : \"Not Reported\"}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-12 p-0 secondary-text\">\r\n                    <div>\r\n                      <span className=\"secondary-title\">{Translate('Sensitivity')}: </span>{sensitivity ? `${(sensitivity * 100).toFixed(2)}%` : \"Not Reported\"}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-126 p-0 secondary-text\">\r\n                    <div>\r\n                      <span className=\"secondary-title\">{Translate('RegulatoryApproval')}: </span>{getPossibleNullString(approving_regulator)}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Modal.Description>\r\n      </Modal.Content>\r\n    </Modal >\r\n  )\r\n} ","import _ from 'lodash';\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { Dropdown, DropdownProps, Pagination, Table } from \"semantic-ui-react\";\r\nimport { AppContext } from \"../../context\";\r\nimport './Charts.css';\r\nimport StudyDetailsModal from './StudyDetailsModal';\r\nimport { mobileDeviceWidth } from '../../constants';\r\nimport { useMediaQuery } from 'react-responsive';\r\nimport { AirtableRecord } from '../../types';\r\nimport Translate from '../../utils/translate/translateService';\r\n\r\nexport default function ReferencesTable() {\r\n  const [state] = useContext(AppContext);\r\n  const [activePage, setActivePage] = useState(1);\r\n  const [boundaryRange] = useState(1);\r\n  const [siblingRange] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(10);\r\n  const [pageLength, setPageLength] = useState(5);\r\n  const [column, setColumn] = useState('denominator');\r\n  const [direction, setDirection] = useState('descending');\r\n  const initialDataState: AirtableRecord[] = [];\r\n  const [data, setData] = useState(initialDataState);\r\n\r\n  const handlePaginationChange = (e: any, event: any) => {\r\n    const { activePage } = event;\r\n    setActivePage(activePage)\r\n  }\r\n\r\n  const handlePageLengthChange = (e: any, event: DropdownProps) => {\r\n    setPageLength(event.value as number);\r\n    setActivePage(1);\r\n  }\r\n\r\n  const pageLengthOptions = [\r\n    { text: 5, value: 5 }, { text: 10, value: 10 }, { text: 25, value: 25 }, { text: 50, value: 50 }, { text: 100, value: 100 }\r\n  ]\r\n\r\n  const handleSort = (clickedColumn: string) => () => {\r\n    if (column !== clickedColumn) {\r\n\r\n      setActivePage(1);\r\n      setColumn(clickedColumn);\r\n      setDirection('ascending');\r\n      return\r\n    }\r\n    else {\r\n      setDirection(direction === 'ascending' ? 'descending' : 'ascending');\r\n    }\r\n  }\r\n  \r\n  const isMobileDevice = useMediaQuery({ maxWidth: mobileDeviceWidth })\r\n\r\n  useEffect(() => {\r\n    let newData = [];\r\n\r\n    if (direction === 'descending') {\r\n      newData = _.orderBy(state.filtered_records, [(o: any) => { return o[column] || '' }], ['desc']);\r\n    }\r\n    else {\r\n      newData =  _.orderBy(state.filtered_records, [column], ['asc']);\r\n    }\r\n\r\n    const splicedData = newData.splice((activePage - 1) * pageLength, pageLength);\r\n    setData(splicedData);\r\n\r\n    if (isMobileDevice) {\r\n      setPageLength(Math.ceil(state.filtered_records.length))\r\n    }\r\n    else {\r\n      setTotalPages(Math.ceil(state.filtered_records.length / pageLength));\r\n    }\r\n  }, [activePage, column, direction, isMobileDevice, pageLength, state.filtered_records])\r\n\r\n  const buildHeaderCell = (sortColumn: string, displayName: string, className: string) => {\r\n    return (\r\n      <Table.HeaderCell\r\n        className={className}\r\n        sorted={column === sortColumn ? direction as any : null}\r\n        onClick={handleSort(sortColumn)}\r\n      >\r\n        {displayName}\r\n      </Table.HeaderCell>)\r\n\r\n  }\r\n\r\n  const getPopulation = (sex: string | null, age: string[] | null, population_group: string[] | null) => {\r\n    if (!population_group) {\r\n      return \"Not Reported\";\r\n    }\r\n    const displaySex = sex && sex !== \"All\" && sex !== \"Unspecified\";\r\n    const displayAge = age && age[0] !== \"All\" && age[0] !== \"Unspecified\";\r\n    return `${displaySex ? `${sex}, ` : \"\"}${displayAge ? `${(age as string[]).join(\", \")}, ` : \"\"}${population_group.join(\", \")}`;\r\n  }\r\n\r\n  const getGeography = (city: string[] | null | undefined, state: string[] | null | undefined, country: string | null) => {\r\n    if (!country) {\r\n      return \"Not Reported\";\r\n    }\r\n    return `${city ? `${city.join(\", \")}, ` : \"\"}${state ? `${state.join(\", \")}, ` : \"\"}${country}`;\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"container col-11 mt-3 top references\">\r\n      <div className=\"col-12 px-0 py-3 section-title\">\r\n        {Translate('References').toUpperCase()}\r\n      </div>\r\n      <Table celled sortable fixed striped className=\"table mb-3 mt-0\">\r\n        <Table.Header className=\"flex col-12 p-0\">\r\n          <Table.Row className=\"flex col-12 p-0\">\r\n            {buildHeaderCell('title', Translate('Name'), 'col-sm-12 col-lg-3 p-1')}\r\n            {buildHeaderCell('country', Translate('Geography'), 'col-sm-12 col-lg-2 p-1')}\r\n            {buildHeaderCell('populations', Translate('Populations'), 'col-sm-12 col-lg-2 p-1')}\r\n            {buildHeaderCell('denominator', Translate('N'), 'col-sm-12 col-lg-1 p-1')}\r\n            {buildHeaderCell('seroprevalence', Translate('Prevalence'), 'col-sm-12 col-lg-1 p-1')}\r\n            {buildHeaderCell('risk_of_bias', Translate('RiskOfBias'), 'col-sm-12 col-lg-2 p-1')}\r\n            {buildHeaderCell('', Translate('Details'), 'col-sm-12 col-lg-1 p-1')}\r\n          </Table.Row>\r\n        </Table.Header>\r\n        <Table.Body className=\"col-12 p-0\">\r\n          {_.map(data,\r\n            (record) => {\r\n              const {\r\n                source_name, source_type, url,\r\n                country, state, city,\r\n                denominator,\r\n                sex, age, population_group,\r\n                seroprevalence,\r\n                risk_of_bias,\r\n              } = record\r\n              return (\r\n                <Table.Row className=\"flex col-12 p-0\" key={Math.random()}>\r\n                  <Table.Cell className=\" col-sm-12 col-lg-3 p-1\">\r\n                    <a href={url ? url : '#'} target=\"_blank\" rel=\"noopener noreferrer\">{source_name}</a>\r\n                    <i className=\"px-1\">({source_type})</i>\r\n                  </Table.Cell>\r\n                  <Table.Cell className=\"flex col-sm-12 col-lg-2 p-1\">{getGeography(city, state, country)}</Table.Cell>\r\n                  <Table.Cell className=\"flex col-sm-12 col-lg-2 p-1\">{getPopulation(sex, age, population_group)}</Table.Cell>\r\n                  <Table.Cell className=\"flex col-sm-12 col-lg-1 p-1\">{denominator ? denominator : \"Not Reported\"}</Table.Cell>\r\n                  <Table.Cell className=\"flex col-sm-12 col-lg-1 p-1\">{seroprevalence ? `${(seroprevalence * 100).toFixed(2)}%` : \"Not Reported\"}</Table.Cell>\r\n                  <Table.Cell className=\"flex col-sm-12 col-lg-2 p-1\">{risk_of_bias ? risk_of_bias : \"Not Reported\"}</Table.Cell>\r\n                  <Table.Cell className=\"flex col-sm-12 col-lg-1 p-0 center-item\"><StudyDetailsModal record={record} /></Table.Cell>\r\n                </Table.Row>\r\n              )\r\n            })}\r\n        </Table.Body>\r\n        {\r\n          !isMobileDevice ?\r\n            <Table.Footer className=\"flex space-between\">\r\n              <Pagination\r\n                activePage={activePage}\r\n                boundaryRange={boundaryRange}\r\n                onPageChange={handlePaginationChange}\r\n                size='mini'\r\n                siblingRange={siblingRange}\r\n                totalPages={totalPages}\r\n              />\r\n              <div className=\"p-2 flex\">\r\n                <Dropdown inline\r\n                  options={pageLengthOptions}\r\n                  defaultValue={pageLengthOptions[0].value}\r\n                  onChange={handlePageLengthChange} />\r\n                <div className=\"px-2\">\r\n                  {Translate('StudiesPerPage')}\r\n              </div>\r\n              </div>\r\n            </Table.Footer> :\r\n            null\r\n        }\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n","import _ from \"lodash\";\r\nimport React, { SyntheticEvent, useContext, useEffect, useState } from \"react\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport { Bar, BarChart, CartesianGrid, ErrorBar, LabelList, Legend, ResponsiveContainer, Tooltip, XAxis, YAxis } from 'recharts';\r\nimport { Dropdown, DropdownProps, Modal } from \"semantic-ui-react\";\r\nimport { mobileDeviceOrTabletWidth } from \"../../constants\";\r\nimport { AppContext } from \"../../context\";\r\nimport httpClient from \"../../httpClient\";\r\nimport { AggregatedRecord, AggregationFactor } from \"../../types\";\r\nimport { sendAnalyticsEvent } from '../../utils/analyticsUtils';\r\nimport Translate from \"../../utils/translate/translateService\";\r\nimport InformationIcon from \"../shared/InformationIcon\";\r\nimport './Charts.css';\r\nimport ReferencesTable from \"./ReferencesTable\";\r\n\r\nexport default function Charts() {\r\n  const [yAxisSelection, setYAxis] = useState(AggregationFactor.country);\r\n  const isMobileDeviceOrTablet = useMediaQuery({ maxWidth: mobileDeviceOrTabletWidth })\r\n  const [state, dispatch] = useContext(AppContext);\r\n  const { filtered_records, filters, showAnalyzePopup } = state;\r\n  const initState = [] as AggregatedRecord[];\r\n  const [showModal, toggleModal] = useState(true);\r\n  const [records, setRecords] = useState(initState);\r\n\r\n  const yAxisOptions = [\r\n    { key: 'Geographies', text: Translate('Geographies'), value: AggregationFactor.country },\r\n    { key: 'Population', text: Translate('Population'), value: AggregationFactor.population_group },\r\n    { key: 'Sex', text: Translate('Sex'), value: AggregationFactor.sex },\r\n    { key: 'Age', text: Translate('Age'), value: AggregationFactor.age },\r\n    { key: 'Study Status', text: Translate('StudyStatus'), value: AggregationFactor.study_status },\r\n    { key: 'Test Type', text: Translate('TestType'), value: AggregationFactor.test_type },\r\n    { key: 'Source Type', text: Translate('SourceType'), value: AggregationFactor.source_type },\r\n    { key: 'Risk Of Bias', text: Translate('RiskOfBias'), value: AggregationFactor.risk_of_bias },\r\n    { key: 'Isotypes Reported', text: Translate('IsotypesReported'), value: AggregationFactor.isotypes_reported },\r\n  ]\r\n\r\n  useEffect(() => {\r\n    if (filtered_records.length > 0) {\r\n      const updateCharts = async () => {\r\n        const api = new httpClient();\r\n        const reAggregatedRecords = await api.postMetaAnalysis(state.filtered_records, yAxisSelection);\r\n        const chartData = _.sortBy(reAggregatedRecords, 'seroprevalence').reverse();\r\n        setRecords(chartData);\r\n      }\r\n      updateCharts();\r\n    }\r\n  }, [yAxisSelection, state, filtered_records, filters])\r\n\r\n  const handleChange = (event: SyntheticEvent<HTMLElement, Event>, data: DropdownProps) => {\r\n    setYAxis(data.value as AggregationFactor);\r\n    sendAnalyticsEvent({\r\n      category: 'Independent Variable',\r\n      action: 'selection',\r\n      label: data.text || \"Unknown\"\r\n    })\r\n  }\r\n\r\n  const CustomTooltip = (e: any) => {\r\n    const { active, payload, label } = e\r\n    if (active && payload) {\r\n      const seroprevalence = payload[0].value;\r\n      const recordError = records.find(o => o.name === label)?.error || [0, 0];\r\n      return (\r\n        <div className=\"col flex popup\">\r\n          <div className=\"col-12 p-0 popup-header\">{label}</div>\r\n          <div className=\"col-12 p-0 popup-content\">{Translate(\"Seroprevalence\")}: {seroprevalence.toFixed(2)}%</div>\r\n          <div className=\"col-12 p-0 popup-content\">{Translate(\"95%ConfidenceInterval\")}:  {(seroprevalence - recordError[0]).toFixed(2)}%-{(seroprevalence + recordError[1]).toFixed(2)}%</div>\r\n          <div className=\"col-12 p-0 popup-content\">{Translate('TotalTests')}: {payload[0].payload.n}</div>\r\n          <div className=\"col-12 p-0 popup-content\">{Translate('TotalEstimates')}: {payload[0].payload.num_studies}</div>\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const renderCustomizedLabel = (props: any) => {\r\n    const { x, y, width, height, value, index } = props;\r\n    let recordError = records[index].error;\r\n    const ratio = width / value;\r\n    const error = Array.isArray(recordError) ? recordError[1] : recordError;\r\n    const errorBarWidth = ratio * error;\r\n    return (\r\n      <g>\r\n        <text x={x + width + 10 + (errorBarWidth as number)} y={y + height / 2 + 5} fill=\"#000\" textAnchor=\"right\" dominantBaseline=\"right\">\r\n          {value.toFixed(2)}\r\n        </text>\r\n      </g>\r\n    );\r\n  };\r\n\r\n  const getYAxisWidth = (chartData: Record<string, string | number | number[]>[]) => {\r\n    let longestWord = 0;\r\n    chartData.filter(o => o.name)\r\n      .forEach(o => {\r\n        const country = o.name as string;\r\n        longestWord = country.length > longestWord ? country.length : longestWord;\r\n      })\r\n    return longestWord;\r\n  }\r\n  const closeModal = () => {\r\n    toggleModal(false);\r\n    dispatch({ type: 'CLOSE_ANALYZE_POPUP' })\r\n  } \r\n\r\n  const MobileInfoModal = () => (\r\n    <Modal className=\"modal\" open={showModal} onClose={closeModal} closeIcon={{ style: { top: '1.0535rem', right: '1rem' }, color: 'black', name: 'close' }}>\r\n      <Modal.Content className=\"modal-content\">\r\n        <div className={isMobileDeviceOrTablet ? \"modal-text-mobile\" : \"modal-text\"}>\r\n          <p>{Translate('InitInfoModalText', ['PartOne'])}</p>\r\n          <p>{Translate('InitInfoModalText', ['PartTwo'])}</p>\r\n          <p>{Translate('InitInfoModalText', ['PartThree'])}</p>\r\n        </div>\r\n      </Modal.Content>\r\n    </Modal>\r\n  )\r\n  \r\n  return (\r\n    <div className=\"charts-page\">\r\n      {showAnalyzePopup ? <MobileInfoModal /> : null}\r\n      <div className={isMobileDeviceOrTablet ? \"mobile-charts container col-11 center-item flex\" : \"charts container col-11 center-item flex\"}>\r\n        <div className=\"col-12 p-0 flex\">\r\n          <div className=\"col-sm-1 col-lg-3\">\r\n          </div>\r\n          <div className=\"charts-title flex p-0 mt-2 p-lg-0 col-sm-8 col-lg-6\">\r\n            <div className=\"col-auto flex center-item\">\r\n              {Translate('SeroprevalenceBy')}\r\n            </div>\r\n            <Dropdown\r\n              placeholder={Translate('Geographies')}\r\n              fluid selection\r\n              className=\"col large-dropdown\"\r\n              onChange={handleChange}\r\n              options={yAxisOptions}\r\n            >\r\n            </Dropdown>\r\n          </div>\r\n          <div className=\"col-sm-6 col-lg-3 flex top right\">\r\n            95% CI\r\n            <InformationIcon\r\n              offset=\"10px\"\r\n              position=\"bottom right\"\r\n              color=\"#455a64\"\r\n              size=\"sm\"\r\n              tooltip={Translate(\"95%ConfidenceIntervalTooltip\")}\r\n              tooltipHeader={Translate(\"95%ConfidenceInterval\")} />\r\n          </div>\r\n        </div>\r\n        <ResponsiveContainer width=\"100%\" height=\"80%\">\r\n          <BarChart data={records} layout='vertical' barGap={10}>\r\n            <CartesianGrid strokeDasharray=\"3 3\" />\r\n            <XAxis type=\"number\" name={`${Translate(\"Seroprevalence\")} (%)`} padding={{ left: 0, right: 30 }} />\r\n            <YAxis dataKey=\"name\" type=\"category\" interval={0} width={getYAxisWidth(records) * 7} />\r\n            <Tooltip content={<CustomTooltip />} />\r\n            <Legend />\r\n            <Bar isAnimationActive={false} dataKey=\"seroprevalence\" name={`${Translate('Seroprevalence')} (%)`} fill=\"#55A6BA\" maxBarSize={60} barSize={20}>\r\n              <LabelList dataKey=\"seroprevalence\" position=\"right\" content={renderCustomizedLabel} />\r\n              <ErrorBar dataKey=\"error\" width={4} strokeWidth={2} />\r\n            </Bar>\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n      <ReferencesTable />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useContext } from \"react\";\nimport { Sidebar, Segment, Menu } from \"semantic-ui-react\";\nimport Filters from \"../sidebar/right-sidebar/Filters\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes, faFilter, faBars } from \"@fortawesome/free-solid-svg-icons\";\nimport TotalStats from \"../sidebar/left-sidebar/TotalStats\";\nimport DateRangeSlider from \"../sidebar/right-sidebar/date-slider/Slider\";\nimport LastUpdated from \"../sidebar/right-sidebar/LastUpdated\";\nimport AnalysisMethods from \"../sidebar/left-sidebar/AnalysisMethods\";\nimport Charts from \"../charts/Charts\";\n\nexport default function AnalyzeMobile() {\n  const [showMobileFilters, setShowFilters] = useState(false);\n  const [showSummary, setShowSummary] = useState(false);\n\n  const handleFilterToggle = (showMobile: boolean, showSummary: boolean) => {\n    setShowFilters(showMobile);\n    setShowSummary(showSummary);\n  }\n\n  return (\n    <div className=\"fill flex\">\n      <Sidebar.Pushable as={Segment} className=\"fill flex\">\n        {/* Filters */}\n        <Sidebar\n          as={Menu}\n          animation='overlay'\n          icon='labeled'\n          className=\"col-10 p-0\"\n          vertical\n          direction=\"left\"\n          visible={showMobileFilters}\n          width='wide'\n        >\n\n          <Filters />\n          <DateRangeSlider />\n          <LastUpdated />\n          <FontAwesomeIcon\n            icon={faTimes}\n            onClick={() => handleFilterToggle(false, false)}\n            className={'icon'}\n            color={'#455a64'}\n            style={{ fontWeight: 300, position: 'absolute', zIndex: 3000, top: 10, right: 20 }}\n            size={\"lg\"} />\n        </Sidebar>\n        {/* Left Sidebar */}\n        <Sidebar\n          as={Menu}\n          animation='overlay'\n          icon='labeled'\n          className=\"col-10 p-0\"\n          vertical\n          direction=\"left\"\n          visible={showSummary}\n          width='wide'\n        >\n          <TotalStats />\n          <AnalysisMethods />\n          <FontAwesomeIcon\n            icon={faTimes}\n            onClick={() => handleFilterToggle(false, false)}\n            className={'icon'}\n            color={'#455a64'}\n            style={{ fontWeight: 300, position: 'absolute', zIndex: 3000, top: 10, right: 20 }}\n            size={\"lg\"} />\n        </Sidebar>\n        <Sidebar.Pusher className=\"fill flex\">\n        <Charts />\n          {/* Icons */}\n          <div className=\"icon-container\"\n            style={{ top: 10, right: 15 }}>\n            <FontAwesomeIcon\n              icon={faFilter}\n              onClick={() => handleFilterToggle(!showMobileFilters, false)}\n              className={'icon'}\n              color={'#455a64'}\n              size={\"2x\"} />\n          </div>\n          <div className=\"icon-container\"\n            style={{ top: 10, right: 58 }}>\n            <FontAwesomeIcon\n              icon={faBars}\n              onClick={() => handleFilterToggle(false, !showSummary)}\n              className={'icon'}\n              color={'#455a64'}\n              size={\"2x\"} />\n          </div>\n        </Sidebar.Pusher>\n      </Sidebar.Pushable>\n    </div>\n  )\n}","import React, { useContext, useEffect } from \"react\";\nimport { useMediaQuery } from \"react-responsive\";\nimport { mobileDeviceOrTabletWidth } from \"../../../constants\";\nimport { AppContext } from \"../../../context\";\nimport httpClient from \"../../../httpClient\";\nimport AnalyzeMobile from '../../mobile/AnalyzeMobile';\nimport LeftSidebar from \"../../sidebar/left-sidebar/LeftSidebar\";\nimport RightSidebar from \"../../sidebar/right-sidebar/RightSidebar\";\nimport Charts from \"../../charts/Charts\";\n\nexport default function Analyze() {\n  const isMobileDeviceOrTablet = useMediaQuery({ maxDeviceWidth: mobileDeviceOrTabletWidth });\n  const [state, dispatch] = useContext(AppContext);\n  \n  useEffect(() => {\n    if(state.filtered_records.length > 0){\n      const updateCountryPrevalence = async () => {\n        const api = new httpClient();\n        const estimateGradePrevalences = await api.getEstimateGrades(state.filtered_records);\n        dispatch({\n          type: 'UPDATE_ESTIMATE_PREVALENCES',\n          payload: estimateGradePrevalences\n        });\n      } \n      updateCountryPrevalence();\n    }\n  }, [state.filtered_records, dispatch])\n\n  return (\n    <div className=\"fill flex dashboard\">\n      {!isMobileDeviceOrTablet ?\n        (<div className=\"fill flex\">\n          <div className=\"col-2 p-0 flex\">\n            <LeftSidebar />\n          </div>\n          <div className=\"col-8 p-0 flex\">\n            <Charts />\n          </div>\n          <div className=\"col-2 p-0 flex\">\n            <RightSidebar />\n          </div>\n        </div>) :\n        (\n          <div className=\"fill flex\">\n            <AnalyzeMobile />\n          </div>\n        )}\n    </div >\n  )\n}","import React from \"react\";\nimport { useMediaQuery } from \"react-responsive\";\nimport { mobileDeviceOrTabletWidth } from \"../../constants\";\nimport { sendAnalyticsEvent } from \"../../utils/analyticsUtils\";\nimport Translate from \"../../utils/translate/translateService\";\nimport { Link } from \"react-router-dom\";\nimport './static.css';\n\nexport default function Data() {\n    const isMobileDeviceOrTablet = useMediaQuery({ maxDeviceWidth: mobileDeviceOrTabletWidth })\n    const renderAirtable = (src: string) => {\n        return <div className=\"col-10 p-0 airtable-embed vertical-spacer\">\n            <iframe\n                title=\"airtable-embed\"\n                className=\"airtable-embed col-12 p-0\"\n                src={src}\n                width=\"85%\"\n                height=\"100%\"\n            /></div>\n    }\n\n    const clickLink = (link: string) => {\n        sendAnalyticsEvent({\n            category: 'Data Link Click',\n            action: 'click',\n            label: link\n        })\n    }\n\n    return (\n        <div className=\"col-12 page\">\n            <div className={isMobileDeviceOrTablet ? \"pb-2\" : \"static-content pb-2\"}>\n                <h1>\n                    {Translate('Methods')}\n                </h1>\n                <p>\n                    {Translate('MethodsText', ['FirstParagraph'])}\n                </p>\n                <p>\n                    {Translate('MethodsText', ['SecondParagraphPartOne'])}\n                    <a target=\"_blank\" onClick={() => clickLink('Methods')} rel=\"noopener noreferrer\" href=\"https://docs.google.com/document/d/1NYpszkr-u__aZspFDFa_fa4VBzjAAAAxNxM1rZ1txWU/edit?usp=sharing\">{Translate('Here', null, null, [true, false]).toLocaleLowerCase()}.</a>\n                    {Translate('MethodsText', ['SecondParagraphPartTwo'], null, [true, false])}\n                    <a rel=\"noopener noreferrer\" onClick={() => clickLink('Study Submission')} target=\"_blank\" href=\"https://forms.gle/XWHQ7QPjQnzQMXSz8\">{Translate('ThisForm', null, null, [true, false]).toLowerCase()}</a>.\n                </p>\n                <h1>\n                    {Translate('ManuscriptAndPreprint')}\n                </h1>\n                <p>\n                    {Translate('PaperText', null, null, [false, true])}<a target=\"_blank\" onClick={() => clickLink('MedRXIV')} rel=\"noopener noreferrer\" href=\"https://www.medrxiv.org/content/10.1101/2020.05.10.20097451v1\">medRxiv</a>.\n                </p>\n                <p>\n                    {Translate('PaperTextTwo', null, null, [false, true])}<a target=\"_blank\" onClick={() => clickLink('LancetID')} rel=\"noopener noreferrer\" href=\"https://www.thelancet.com/journals/laninf/article/PIIS1473-3099(20)30631-9/fulltext#%20\"><i>{Translate('LancetID')}</i></a>.\n                </p>\n                <h1>\n                    {Translate('OurData')}\n                </h1>\n                <p>\n                    {Translate('OurDataText', ['Text'])}\n                </p>\n            </div>\n            {renderAirtable('https://airtable.com/embed/shraXWPJ9Yu7ybowM?backgroundColor=blue&viewControls=on')}\n            <p>\n            {Translate('UseOfData')}\n            <Link className=\"p-1\" to=\"/TermsOfUse\">{Translate('TermsOfUse')}</Link>\n            </p>\n        </div>\n    )\n}\n","import { faFile } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React from \"react\";\r\nimport Translate from \"../../../utils/translate/translateService\";\r\n\r\ninterface InsightsCardProps {\r\n  identifier: string,\r\n  date: string,\r\n  title: string,\r\n  img: string,\r\n  url: string,\r\n  italicize?: string\r\n}\r\n\r\n\r\nexport default function InsightsCard(props: InsightsCardProps) {\r\n  return (\r\n    <div className=\"flex card column insights-card\">\r\n      <div className=\"flex space-between pb-1\">\r\n        <div className=\"section-title insights-card-identifier\">\r\n          {props.identifier.toUpperCase()}\r\n        </div>\r\n        <div className=\"insights-card-date\">\r\n          {props.date}\r\n        </div>\r\n      </div>\r\n      <div className=\"flex center-item insights-card-image\">\r\n        <img src={props.img} alt=\"\" className=\"fit insights-card-image\"></img>\r\n        <a href={props.url}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"overlay flex\">\r\n          <div className=\"insights-card-image-overlay flex fill center-item column\">\r\n            <div>{Translate('ViewFile')}</div>\r\n            <div className=\"flex center-item\">\r\n              <FontAwesomeIcon\r\n                icon={faFile}\r\n                className={'icon'}\r\n                color={'white'}\r\n                size={\"lg\"} />\r\n\r\n            </div>\r\n          </div>\r\n        </a>\r\n      </div>\r\n      <div className=\"fit insights-card-title\">\r\n        <a href={props.url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"\">\r\n          {props.italicize ? <i>{props.italicize}&nbsp;</i> : null}{props.title}\r\n        </a>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React from \"react\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport { mobileDeviceOrTabletWidth } from \"../../../constants\";\r\nimport InsightsCard from \"./InsightsCard\";\r\nimport './styles.scss';\r\nimport Translate from \"../../../utils/translate/translateService\";\r\nimport July2020Update from '../../../assets/images/IndustryUpdateJuly_2020.png'\r\nimport June2020Update from '../../../assets/images/IndustryUpdateJune_2020.png'\r\nimport August2020Update from '../../../assets/images/August2020Update.png'\r\nimport May2020Update from '../../../assets/images/IndustryUpdateMay_2020.png'\r\nimport PreprintUpdate from '../../../assets/images/IndustryUpdatePre_2020.png'\r\nimport BloodBank from '../../../assets/images/SeroTrackerBloodBank_July_2020.png'\r\nimport MedRxiv from '../../../assets/images/Prepublication.png'\r\nimport LancetId from '../../../assets/images/LancetIDArticle.png'\r\n\r\nexport default function Insights() {\r\n  const isMobileDeviceOrTablet = useMediaQuery({ maxDeviceWidth: mobileDeviceOrTabletWidth })\r\n\r\n  return (\r\n    <div className=\"col-12 page\">\r\n      <div className={isMobileDeviceOrTablet ? \"pb-2 policy-container\" : \"policy-container static-content\"}>\r\n        <h1 className=\"col-12 p-0 fit\">\r\n          {Translate('Insights')}\r\n        </h1>\r\n        <h3 className=\"normal\">\r\n          {Translate('ReportsAndArticles').toUpperCase()}\r\n        </h3>\r\n        <div className=\"flex insights-article-container\">\r\n        <div className=\"col-sm-12 col-lg-6 py-2\">\r\n            <InsightsCard\r\n              identifier={Translate(\"Report\")}\r\n              date={\"September 9, 2020\"}\r\n              img={August2020Update}\r\n              title=\"August Report - COVID-19 Screening & Testing in Canadas Private Sector\"\r\n              url=\"https://drive.google.com/file/d/1m7BlfUKCYs32_D1jnFUEQHPr3Qjg5Eyt/view?usp=sharing\"/>\r\n          </div>\r\n        <div className=\"col-sm-12 col-lg-6 py-2\">\r\n            <InsightsCard\r\n              identifier={Translate(\"Report\")}\r\n              date={\"August 7, 2020\"}\r\n              img={July2020Update}\r\n              title=\"July Report - COVID-19 Screening & Testing in Canadas Private Sector\"\r\n              url=\"https://drive.google.com/file/d/1Rx3i_Sy01suu-ZZYV7LRpo2KEclbXCNN/view?usp=sharing\"/>\r\n          </div>\r\n          <div className=\"col-sm-12 col-lg-6 py-2\">\r\n            <InsightsCard\r\n              identifier={Translate(\"Publication\")}\r\n              date={\"August 4, 2020\"}\r\n              img={LancetId}\r\n              italicize=\"Lancet ID\"\r\n              title=\"Article (SeroTracker: a global SARS-CoV-2 seroprevalence dashboard)\"\r\n              url=\"https://www.thelancet.com/journals/laninf/article/PIIS1473-3099(20)30631-9/fulltext#%20\" />\r\n          </div>\r\n          <div className=\"col-sm-12 col-lg-6 py-2\">\r\n            <InsightsCard\r\n              identifier={Translate(\"Report\")}\r\n              date={\"July 22, 2020\"}\r\n              img={BloodBank}\r\n              title=\"SeroTracker Blood Bank Seroprevalence Preliminary Report\"\r\n              url=\"https://drive.google.com/file/d/1It2CzAwEfTcQ1zIC6z2fO7i7XEfmWfom/view?usp=sharing\" />\r\n          </div>\r\n          <div className=\"col-sm-12 col-lg-6 py-2\">\r\n            <InsightsCard\r\n              identifier={Translate(\"Report\")}\r\n              date={\"July 12, 2020\"}\r\n              img={June2020Update}\r\n              title=\"June Report - COVID-19 Screening & Testing in Canadas Private Sector\"\r\n              url=\"https://drive.google.com/file/d/1h8QSrnyA3LfBbwWpqMHNgXsoMyngAw13/view\" />\r\n          </div>\r\n          <div className=\"col-sm-12 col-lg-6 py-2\">\r\n            <InsightsCard\r\n              identifier={Translate(\"Report\")}\r\n              date={\"June 10, 2020\"}\r\n              img={May2020Update}\r\n              title=\"May Report - COVID-19 Screening & Testing in Canadas Private Sector\"\r\n              url=\"https://drive.google.com/file/d/16pCR-zh1UiWjQFhTDxW_2adSGuq0pCgz/view?usp=sharing\" />\r\n          </div>\r\n          <div className=\"col-sm-12 col-lg-6 py-2\">\r\n            <InsightsCard\r\n              identifier={Translate(\"Report\")}\r\n              date={\"May 19, 2020\"}\r\n              img={PreprintUpdate}\r\n              title=\"Preliminary Report - COVID-19 Screening & Testing in Canadas Private Sector\"\r\n              url=\"https://drive.google.com/file/d/1I1gY1lZndwp4_eUqoZviU8L2_izmkmQP/view?usp=sharing\" />\r\n          </div>\r\n          <div className=\"col-sm-12 col-lg-6 py-2\">\r\n            <InsightsCard\r\n              identifier={Translate(\"PreprintPublication\")}\r\n              date={\"May 14, 2020\"}\r\n              img={MedRxiv}\r\n              title=\"Lessons from a rapid systematic review of early SARS-CoV-2 serosurveys\"\r\n              url=\"https://www.medrxiv.org/content/10.1101/2020.05.10.20097451v1\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React from \"react\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport { mobileDeviceOrTabletWidth } from \"../../constants\";\r\nimport Translate from \"../../utils/translate/translateService\";\r\nimport './static.css';\r\n\r\nexport default function PrivacyPolicy() {\r\n  const isMobileDeviceOrTablet = useMediaQuery({ maxDeviceWidth: mobileDeviceOrTabletWidth })\r\n\r\n  return (\r\n    <div className=\"col-12 page \">\r\n      <div className={isMobileDeviceOrTablet ? \"pb-2 policy-container flex fill\" : \"policy-container static-content pb-2 flex fill\"}>\r\n        <h1 className=\"col-12 p-0 fit\">\r\n          {Translate('PrivacyPolicy')}\r\n        </h1>\r\n        <iframe title=\"PrivacyPolicy\" className=\"fill policy-iframe\" src=\"https://app.termly.io/embed/terms-of-use/796fdf5d-ba75-4a21-9e54-4360f4fc9ccc\"></iframe>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React from \"react\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport { mobileDeviceOrTabletWidth } from \"../../constants\";\r\nimport Translate from \"../../utils/translate/translateService\";\r\nimport './static.css';\r\n\r\nexport default function TermsOfUse() {\r\n  const isMobileDeviceOrTablet = useMediaQuery({ maxDeviceWidth: mobileDeviceOrTabletWidth })\r\n\r\n  return (\r\n    <div className=\"col-12 page\">\r\n      <div className={isMobileDeviceOrTablet ? \"pb-2 policy-container flex fill\" : \"policy-container static-content pb-2 flex fill\"}>\r\n        <h1 className=\"col-12 p-0 fit\">\r\n          {Translate('TermsOfUse')}\r\n        </h1>\r\n        <div className=\"col-12 p-0 fit\">\r\n          {Translate('DisclaimerBody')}\r\n        </div>\r\n\r\n        <h3 className=\"col-12 p-0 fit\">\r\n          {Translate('DisclaimerListHeader')}\r\n        </h3>\r\n        <ol>\r\n          <li>\r\n            {Translate('DisclaimerList1')}\r\n          </li>\r\n          <li>\r\n            {Translate('DisclaimerList2')}\r\n          </li>\r\n          <li>\r\n            {Translate('DisclaimerList3')}\r\n          </li>\r\n          <li>\r\n            {Translate('DisclaimerList4')}\r\n          </li>\r\n          <li>\r\n            {Translate('DisclaimerList5')}\r\n          </li>\r\n          <li>\r\n            {Translate('DisclaimerList6')}\r\n          </li>\r\n        </ol>\r\n        <div>\r\n          {Translate('DisclaimerFooter')}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useContext } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Button } from 'semantic-ui-react'\r\nimport { AppContext } from '../../context'\r\nimport Translate from '../../utils/translate/translateService'\r\nimport \"./shared.scss\"\r\n\r\nexport const CookieBanner = () => {\r\n  const [state, dispatch] = useContext(AppContext)\r\n\r\n  const acceptCookes = () => {\r\n    localStorage.setItem('acceptedCookies', 'true');\r\n    dispatch({ type: 'CLOSE_COOKIE_BANNER' })\r\n  }\r\n\r\n  if (!localStorage.getItem('acceptedCookies') && !state.showCookieBanner) {\r\n    dispatch({ type: 'OPEN_COOKIE_BANNER' })\r\n  }\r\n\r\n  return (\r\n    state.showCookieBanner ?\r\n      <div className=\"cookie-banner flex\">\r\n        <div className=\"fill flex center-item\">\r\n          <div className=\"col-md-6 p-3 flex column\">\r\n            <div>\r\n              {Translate('CookiePolicyBody', null, null, [false, true])}\r\n              <Link to=\"/CookiePolicy\">{Translate('CookiePolicy')}</Link>\r\n            </div>\r\n            <div className=\"flex right\">\r\n              <Button color=\"blue\" onClick={acceptCookes}>{Translate('Accept')}</Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      : null\r\n  )\r\n}","import { faFileAlt, faGlobeAmericas, faUsers, faTable, faChartBar} from '@fortawesome/free-solid-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport React, { useEffect, useState } from 'react'\nimport { useMediaQuery } from 'react-responsive'\nimport { Link, useLocation } from 'react-router-dom'\nimport MultiColorIcon from '../../assets/images/colored-icon.svg'\nimport { mobileDeviceOrTabletWidth } from '../../constants'\nimport Translate from '../../utils/translate/translateService'\n\n\nexport const NavBar = () => {\n  const [tab, setTab] = useState(\"\");\n\n  const getTabClass = (tabName: string) => {\n    return tabName === tab ? 'bold col-auto h-100 flex center-item' : 'regular col-auto h-100 flex center-item';\n  }\n\n  const usePageViews = () => {\n    let location = useLocation();\n    useEffect(() => {\n      setTab(location.pathname)\n    }, [location]);\n  }\n\n  usePageViews()\n  const isMobileDeviceOrTablet = useMediaQuery({ maxDeviceWidth: mobileDeviceOrTabletWidth })\n  return (\n    <header className=\"App-header col-12 px-sm-2\">\n      <div className=\"App-title col-auto py-3 px-0 flex left\">\n        <Link to=\"/\" className=\"flex\">\n          <img src={MultiColorIcon} width={23} height={23} alt=\"\" />\n          <div className=\"col-auto px-2\" >SeroTracker</div>\n        </Link>\n      </div>\n      <div className=\"App-tabs h-100 p-0 col-auto space-evenly\">\n        <div className={getTabClass('/Explore')}>\n          <Link to=\"/Explore\">\n            {isMobileDeviceOrTablet ?\n              <FontAwesomeIcon icon={faGlobeAmericas} size=\"lg\" /> :\n              Translate('Explore')}\n          </Link>\n        </div>\n        <div className={getTabClass('/Analyze')}>\n          <Link to=\"/Analyze\">\n            {isMobileDeviceOrTablet ?\n              <FontAwesomeIcon icon={faChartBar} size=\"lg\" /> :\n              Translate('Analyze')}\n          </Link>\n        </div>\n        <div className={getTabClass('/Data')}>\n          <Link to=\"/Data\">\n            {isMobileDeviceOrTablet ?\n              <FontAwesomeIcon icon={faTable} size=\"lg\" /> :\n              Translate('Data')}\n          </Link>\n        </div>\n        <div className={getTabClass('/Insights')}>\n          <Link to=\"/Insights\">\n            {isMobileDeviceOrTablet ?\n              <FontAwesomeIcon icon={faFileAlt} size=\"lg\" /> :\n              Translate('Insights')}\n          </Link>\n        </div>\n        <div className={getTabClass('/About')}>\n          <Link to=\"/About\">\n            {isMobileDeviceOrTablet ?\n              <FontAwesomeIcon icon={faUsers} size=\"lg\" /> :\n              Translate('About')}\n          </Link>\n        </div>\n        {/* <div className={getTabClass('')}>\n          <Settings />\n        </div> */}\n      </div>\n    </header >\n  )\n}","import React, { useContext, useEffect } from \"react\";\nimport { Redirect, Route, Switch } from \"react-router-dom\";\nimport './App.css';\nimport About from './components/pages/About';\nimport CookiePolicy from \"./components/pages/CookiePolicy\";\nimport Explore from \"./components/pages/Dashboard/Explore\";\nimport Analyze from \"./components/pages/Dashboard/Analyze\";\nimport Data from './components/pages/Data';\nimport Insights from \"./components/pages/insights/Insights\";\nimport PrivacyPolicy from './components/pages/PrivacyPolicy';\nimport TermsOfUse from \"./components/pages/TermsOfUse\";\nimport { CookieBanner } from \"./components/shared/CookieBanner\";\nimport { NavBar } from \"./components/shared/NavBar\";\nimport { AppContext } from \"./context\";\nimport httpClient from \"./httpClient\";\nimport { setLanguageType } from \"./utils/translate/translateService\";\n\nfunction App() {\n  const [{ language }, dispatch] = useContext(AppContext);\n  // DATA\n  useEffect(() => {\n    const api = new httpClient()\n    const alreadyAcceptedCookes = localStorage.getItem('acceptedCookies');\n    if (alreadyAcceptedCookes) {\n      dispatch({\n        type: 'ACCEPT_COOKIES'\n      });\n    }\n    const getAirtableRecords = async () => {\n      const response = await api.getAirtableRecords()\n      dispatch({\n        type: 'GET_AIRTABLE_RECORDS',\n        payload: response\n      });\n    }\n\n    const handleResize = () => {\n      let vh = window.innerHeight * 0.01;\n      document.documentElement.style.setProperty('--vh', `${vh}px`);\n    }\n\n    window.addEventListener('resize', handleResize)\n    getAirtableRecords();\n    handleResize();\n\n    setLanguageType(language);\n  }, [dispatch, language])\n\n  // ROUTING TABS\n  return (\n    <div className=\"App\">\n      <NavBar />\n      <CookieBanner />\n      <Switch>\n        <Route path=\"/About\">\n          <About />\n        </Route>\n        <Route path=\"/Explore\">\n          <Explore />\n        </Route>\n        <Route path=\"/Dashboard\">\n          <Redirect to=\"/Explore\" />\n        </Route>\n        <Route path=\"/Analyze\">\n          <Analyze />\n        </Route>\n        <Route path=\"/Data\">\n          <Data />\n        </Route>\n        <Route path=\"/PrivacyPolicy\">\n          <PrivacyPolicy />\n        </Route>\n        <Route path=\"/CookiePolicy\">\n          <CookiePolicy />\n        </Route>\n        <Route path=\"/TermsOfUse\">\n          <TermsOfUse />\n        </Route>\n        <Route path=\"/Insights\">\n          <Insights />\n        </Route>\n        <Redirect exact from=\"/\" to=\"/Explore\" />\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport App from './App';\nimport { AppContextProvider } from './context';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport GAListener from './utils/analyticsUtils';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <AppContextProvider>\n        <GAListener trackingId={process.env.REACT_APP_GA_TRACKERID}>\n          <App />\n        </GAListener>\n      </AppContextProvider>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}